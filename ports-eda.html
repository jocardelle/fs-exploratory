<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Josephine Cardelle">

<title>Ports Exploratory Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="ports-eda_files/libs/clipboard/clipboard.min.js"></script>
<script src="ports-eda_files/libs/quarto-html/quarto.js"></script>
<script src="ports-eda_files/libs/quarto-html/popper.min.js"></script>
<script src="ports-eda_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="ports-eda_files/libs/quarto-html/anchor.min.js"></script>
<link href="ports-eda_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="ports-eda_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="ports-eda_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="ports-eda_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="ports-eda_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="ports-eda_files/libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">

<script src="ports-eda_files/libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="ports-eda_files/libs/plotly-binding-4.11.0/plotly.js"></script>

<script src="ports-eda_files/libs/typedarray-0.1/typedarray.min.js"></script>

<script src="ports-eda_files/libs/jquery-3.5.1/jquery.min.js"></script>

<link href="ports-eda_files/libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="ports-eda_files/libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="ports-eda_files/libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="ports-eda_files/libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#setup" id="toc-setup" class="nav-link active" data-scroll-target="#setup">Setup</a>
  <ul class="collapse">
  <li><a href="#libraries" id="toc-libraries" class="nav-link" data-scroll-target="#libraries">Libraries</a></li>
  <li><a href="#read-in-data" id="toc-read-in-data" class="nav-link" data-scroll-target="#read-in-data">Read in data</a></li>
  </ul></li>
  <li><a href="#species-at-ports" id="toc-species-at-ports" class="nav-link" data-scroll-target="#species-at-ports">Species at Ports</a></li>
  <li><a href="#top-90-of-revenue-in-a-port" id="toc-top-90-of-revenue-in-a-port" class="nav-link" data-scroll-target="#top-90-of-revenue-in-a-port">Top 90% of revenue in a port</a>
  <ul class="collapse">
  <li><a href="#interactive-versions" id="toc-interactive-versions" class="nav-link" data-scroll-target="#interactive-versions">Interactive versions</a></li>
  </ul></li>
  <li><a href="#employment-per-port" id="toc-employment-per-port" class="nav-link" data-scroll-target="#employment-per-port">Employment per port</a></li>
  <li><a href="#individual-port-species" id="toc-individual-port-species" class="nav-link" data-scroll-target="#individual-port-species">Individual Port Species</a>
  <ul class="collapse">
  <li><a href="#north-wa-coast" id="toc-north-wa-coast" class="nav-link" data-scroll-target="#north-wa-coast">North WA Coast</a></li>
  <li><a href="#puget-sound" id="toc-puget-sound" class="nav-link" data-scroll-target="#puget-sound">Puget Sound</a></li>
  <li><a href="#south-and-central-wa-coast" id="toc-south-and-central-wa-coast" class="nav-link" data-scroll-target="#south-and-central-wa-coast">South and Central WA Coast</a></li>
  <li><a href="#astoria" id="toc-astoria" class="nav-link" data-scroll-target="#astoria">Astoria</a></li>
  <li><a href="#newport" id="toc-newport" class="nav-link" data-scroll-target="#newport">Newport</a></li>
  <li><a href="#coos-bay" id="toc-coos-bay" class="nav-link" data-scroll-target="#coos-bay">Coos Bay</a></li>
  <li><a href="#brookings" id="toc-brookings" class="nav-link" data-scroll-target="#brookings">Brookings</a></li>
  <li><a href="#crescent-city" id="toc-crescent-city" class="nav-link" data-scroll-target="#crescent-city">Crescent City</a></li>
  <li><a href="#eureka" id="toc-eureka" class="nav-link" data-scroll-target="#eureka">Eureka</a></li>
  <li><a href="#fort-bragg" id="toc-fort-bragg" class="nav-link" data-scroll-target="#fort-bragg">Fort Bragg</a></li>
  <li><a href="#bodega-bay" id="toc-bodega-bay" class="nav-link" data-scroll-target="#bodega-bay">Bodega Bay</a></li>
  <li><a href="#san-francisco" id="toc-san-francisco" class="nav-link" data-scroll-target="#san-francisco">San Francisco</a></li>
  <li><a href="#monterey" id="toc-monterey" class="nav-link" data-scroll-target="#monterey">Monterey</a></li>
  <li><a href="#morro-bay" id="toc-morro-bay" class="nav-link" data-scroll-target="#morro-bay">Morro Bay</a></li>
  <li><a href="#santa-barbara" id="toc-santa-barbara" class="nav-link" data-scroll-target="#santa-barbara">Santa Barbara</a></li>
  <li><a href="#los-angeles" id="toc-los-angeles" class="nav-link" data-scroll-target="#los-angeles">Los Angeles</a></li>
  <li><a href="#san-diego" id="toc-san-diego" class="nav-link" data-scroll-target="#san-diego">San Diego</a></li>
  <li><a href="#other" id="toc-other" class="nav-link" data-scroll-target="#other">Other</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Ports Exploratory Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Josephine Cardelle </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="setup" class="level1">
<h1>Setup</h1>
<section id="libraries" class="level2">
<h2 class="anchored" data-anchor-id="libraries">Libraries</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(forcats)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(paletteer)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(snakecase)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="read-in-data" class="level2">
<h2 class="anchored" data-anchor-id="read-in-data">Read in data</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>products <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/processed_products/products_general.csv"</span>))</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>processor_port_emp <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="fu">here</span>(<span class="st">"data/processed_products/processor_port.csv"</span>))</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>port_location <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"north_wa_coast"</span>, <span class="st">"puget_sound"</span>, <span class="st">"south_and_central_wa_coast"</span>, <span class="st">"astoria"</span>, <span class="st">"columbia_river"</span>, <span class="st">"tillamook"</span>, <span class="st">"newport"</span>, <span class="st">"coos_bay"</span>, <span class="st">"brookings"</span>, <span class="st">"crescent_city"</span>, <span class="st">"eureka"</span>, <span class="st">"fort_bragg"</span>, <span class="st">"bodega_bay"</span>, <span class="st">"san_francisco"</span>, <span class="st">"monterey"</span>, <span class="st">"morro_bay"</span>, <span class="st">"santa_barbara"</span>, <span class="st">"los_angeles"</span>, <span class="st">"san_diego"</span>, <span class="st">"other"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="species-at-ports" class="level1">
<h1>Species at Ports</h1>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert port group to snake case</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>processor_port_emp<span class="sc">$</span>io_pac_port_group <span class="ot">&lt;-</span> <span class="fu">to_snake_case</span>(processor_port_emp<span class="sc">$</span>io_pac_port_group)</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Select unique ports and id numbers</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>ports <span class="ot">&lt;-</span> processor_port_emp <span class="sc">%&gt;%</span> </span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(pp_idnum, io_pac_port_group) <span class="sc">%&gt;%</span> </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">distinct</span>()</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Join products and port information</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>product_ports <span class="ot">&lt;-</span> <span class="fu">left_join</span>(products, ports, <span class="at">by =</span> <span class="st">"pp_idnum"</span>)</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(product_ports, <span class="at">file =</span> (<span class="fu">here</span>(<span class="st">"data/processed_products/port_products.csv"</span>)))</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Sum revenue by port and product</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>port_product_revenue <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(io_pac_port_group, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="co"># Order ports by location  </span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>port_product_revenue<span class="sc">$</span>io_pac_port_group <span class="ot">&lt;-</span> <span class="fu">factor</span>(port_product_revenue<span class="sc">$</span>io_pac_port_group, <span class="at">levels =</span> port_location)</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Stacked bar chart</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(port_product_revenue, aes(fill = product_general, y = io_pac_port_group, x = wholesale)) +</span></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_bar(position = "stack", stat = "identity")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="top-90-of-revenue-in-a-port" class="level1">
<h1>Top 90% of revenue in a port</h1>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>top90_products <span class="ot">&lt;-</span> port_product_revenue <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(io_pac_port_group) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(wholesale), <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cum_rev =</span> <span class="fu">cumsum</span>(wholesale),</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">tot_rev =</span> <span class="fu">sum</span>(wholesale),</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">cum_prop =</span> cum_rev <span class="sc">/</span> tot_rev) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cum_prop <span class="sc">&lt;=</span> <span class="fl">0.90</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> <span class="co"># keep all products that together make up at least 90% of revenue</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(top90_products, aes(fill = product_general,</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="co">#                            y = io_pac_port_group,</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="co">#                            x = wholesale)) +</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_bar(position = "stack", stat = "identity") +</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(labels = label_dollar(scale = 1e-9, suffix = "B")) +</span></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_y_discrete(limits = rev(levels(top90_products$io_pac_port_group))) +</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_fill_viridis_d(option = "inferno") +</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = "Top 90% of Processor Product Revenue by Port (2011-2022)",</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="co">#        x = "Wholesale Revenue",</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="co">#        y = " Processor Port")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ggplot(top90_products, aes(fill = product_general,</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="co">#                            y = io_pac_port_group,</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="co">#                            x = wholesale)) +</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co">#   geom_bar(position = "fill", stat = "identity") +</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_x_continuous(labels = scales::percent) +</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_y_discrete(limits = rev(levels(top90_products$io_pac_port_group))) +</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   scale_fill_viridis_d(option = "inferno") +</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   labs(title = "Top 90% of Processor Product Revenue by Port (2011-2022)",</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="co">#        x = "Wholesale Revenue",</span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co">#        y = "Processor Port",</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="co">#        fill = "Product Species")</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="interactive-versions" class="level2">
<h2 class="anchored" data-anchor-id="interactive-versions">Interactive versions</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>bar_port <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> top90_products,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>wholesale,</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>io_pac_port_group,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="sc">~</span>product_general,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"bar"</span>,</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation =</span> <span class="st">"h"</span>,</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">colors =</span> <span class="st">"inferno"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">barmode =</span> <span class="st">"stack"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Revenue"</span>),</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Processor Port"</span>, <span class="at">autorange =</span> <span class="st">"reversed"</span>)</span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>bar_port</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-9c66aec1ef97f9203b4f" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-9c66aec1ef97f9203b4f">{"x":{"visdat":{"4bb0797449aa":["function () ","plotlyVisDat"]},"cur_data":"4bb0797449aa","attrs":{"4bb0797449aa":{"x":{},"y":{},"orientation":"h","color":{},"colors":"inferno","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"barmode":"stack","xaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Revenue"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Processor Port","autorange":"reversed","type":"category","categoryorder":"array","categoryarray":["north_wa_coast","puget_sound","south_and_central_wa_coast","astoria","columbia_river","tillamook","newport","coos_bay","brookings","crescent_city","eureka","fort_bragg","bodega_bay","san_francisco","monterey","morro_bay","santa_barbara","los_angeles","san_diego","other"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[3092400289],"y":["puget_sound"],"orientation":"h","type":"bar","name":"COD","marker":{"color":"rgba(0,0,4,1)","line":{"color":"rgba(0,0,4,1)"}},"textfont":{"color":"rgba(0,0,4,1)"},"error_y":{"color":"rgba(0,0,4,1)"},"error_x":{"color":"rgba(0,0,4,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[42562410,5824585133,1210220100,541651076,13516966,377574453,441000513,15347430,36183876,185309004,18666022,32878121,74388317,55900170,616029720],"y":["north_wa_coast","puget_sound","south_and_central_wa_coast","astoria","tillamook","newport","coos_bay","brookings","crescent_city","eureka","fort_bragg","bodega_bay","san_francisco","monterey","other"],"orientation":"h","type":"bar","name":"CRAB","marker":{"color":"rgba(8,5,30,1)","line":{"color":"rgba(8,5,30,1)"}},"textfont":{"color":"rgba(8,5,30,1)"},"error_y":{"color":"rgba(8,5,30,1)"},"error_x":{"color":"rgba(8,5,30,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[313988343,120726068,7915113,234044426,26015940,11317873],"y":["astoria","newport","brookings","eureka","fort_bragg","morro_bay"],"orientation":"h","type":"bar","name":"FLOUNDER","marker":{"color":"rgba(25,12,62,1)","line":{"color":"rgba(25,12,62,1)"}},"textfont":{"color":"rgba(25,12,62,1)"},"error_y":{"color":"rgba(25,12,62,1)"},"error_x":{"color":"rgba(25,12,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1275198722,460218753,1019824783,450549185,24582241,2046724424],"y":["puget_sound","south_and_central_wa_coast","astoria","newport","crescent_city","other"],"orientation":"h","type":"bar","name":"HAKE","marker":{"color":"rgba(48,10,91,1)","line":{"color":"rgba(48,10,91,1)"}},"textfont":{"color":"rgba(48,10,91,1)"},"error_y":{"color":"rgba(48,10,91,1)"},"error_x":{"color":"rgba(48,10,91,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1490064248,71382966,10126040,30979779,165858713],"y":["puget_sound","san_francisco","morro_bay","santa_barbara","other"],"orientation":"h","type":"bar","name":"HALIBUT","marker":{"color":"rgba(70,11,106,1)","line":{"color":"rgba(70,11,106,1)"}},"textfont":{"color":"rgba(70,11,106,1)"},"error_y":{"color":"rgba(70,11,106,1)"},"error_x":{"color":"rgba(70,11,106,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[38951046],"y":["monterey"],"orientation":"h","type":"bar","name":"HERRING","marker":{"color":"rgba(92,18,110,1)","line":{"color":"rgba(92,18,110,1)"}},"textfont":{"color":"rgba(92,18,110,1)"},"error_y":{"color":"rgba(92,18,110,1)"},"error_x":{"color":"rgba(92,18,110,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[15914707],"y":["santa_barbara"],"orientation":"h","type":"bar","name":"JACK","marker":{"color":"rgba(114,26,110,1)","line":{"color":"rgba(114,26,110,1)"}},"textfont":{"color":"rgba(114,26,110,1)"},"error_y":{"color":"rgba(114,26,110,1)"},"error_x":{"color":"rgba(114,26,110,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[139401517,72535062,172483201,5285523,272863838,602668081,566082492],"y":["fort_bragg","bodega_bay","monterey","morro_bay","santa_barbara","los_angeles","san_diego"],"orientation":"h","type":"bar","name":"OTHER","marker":{"color":"rgba(135,33,107,1)","line":{"color":"rgba(135,33,107,1)"}},"textfont":{"color":"rgba(135,33,107,1)"},"error_y":{"color":"rgba(135,33,107,1)"},"error_x":{"color":"rgba(135,33,107,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[834477337,8624092,22647580,32784019],"y":["south_and_central_wa_coast","tillamook","brookings","eureka"],"orientation":"h","type":"bar","name":"OYSTERS","marker":{"color":"rgba(156,41,100,1)","line":{"color":"rgba(156,41,100,1)"}},"textfont":{"color":"rgba(156,41,100,1)"},"error_y":{"color":"rgba(156,41,100,1)"},"error_x":{"color":"rgba(156,41,100,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[8575348006,1911099635],"y":["puget_sound","other"],"orientation":"h","type":"bar","name":"POLLOCK","marker":{"color":"rgba(177,50,90,1)","line":{"color":"rgba(177,50,90,1)"}},"textfont":{"color":"rgba(177,50,90,1)"},"error_y":{"color":"rgba(177,50,90,1)"},"error_x":{"color":"rgba(177,50,90,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[242779293,9023134,6167330,118646940,25675491,16297497],"y":["astoria","tillamook","brookings","eureka","fort_bragg","morro_bay"],"orientation":"h","type":"bar","name":"ROCKFISH","marker":{"color":"rgba(196,60,78,1)","line":{"color":"rgba(196,60,78,1)"}},"textfont":{"color":"rgba(196,60,78,1)"},"error_y":{"color":"rgba(196,60,78,1)"},"error_x":{"color":"rgba(196,60,78,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[48565552,147962947,106332449,89109769,8464735],"y":["north_wa_coast","newport","coos_bay","eureka","morro_bay"],"orientation":"h","type":"bar","name":"SABLEFISH","marker":{"color":"rgba(214,75,64,1)","line":{"color":"rgba(214,75,64,1)"}},"textfont":{"color":"rgba(214,75,64,1)"},"error_y":{"color":"rgba(214,75,64,1)"},"error_x":{"color":"rgba(214,75,64,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[158335712,9337821087,212437504,168260286,115831440,215790426,20034696,41535253,2161292573,68871615,1487278503],"y":["north_wa_coast","puget_sound","astoria","coos_bay","bodega_bay","san_francisco","morro_bay","santa_barbara","los_angeles","san_diego","other"],"orientation":"h","type":"bar","name":"SALMON","marker":{"color":"rgba(229,92,48,1)","line":{"color":"rgba(229,92,48,1)"}},"textfont":{"color":"rgba(229,92,48,1)"},"error_y":{"color":"rgba(229,92,48,1)"},"error_x":{"color":"rgba(229,92,48,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[242013384,103958961],"y":["astoria","monterey"],"orientation":"h","type":"bar","name":"SARDINE","marker":{"color":"rgba(240,112,32,1)","line":{"color":"rgba(240,112,32,1)"}},"textfont":{"color":"rgba(240,112,32,1)"},"error_y":{"color":"rgba(240,112,32,1)"},"error_x":{"color":"rgba(240,112,32,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[464005814,631429860,55727987,268061084,416983187,37063801,37291303,113074031,57620558,6634080715,430743836],"y":["south_and_central_wa_coast","astoria","tillamook","newport","coos_bay","brookings","crescent_city","eureka","san_francisco","los_angeles","other"],"orientation":"h","type":"bar","name":"SHRIMP","marker":{"color":"rgba(248,135,14,1)","line":{"color":"rgba(248,135,14,1)"}},"textfont":{"color":"rgba(248,135,14,1)"},"error_y":{"color":"rgba(248,135,14,1)"},"error_x":{"color":"rgba(248,135,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[802171978,30619083],"y":["monterey","santa_barbara"],"orientation":"h","type":"bar","name":"SQUID","marker":{"color":"rgba(252,160,7,1)","line":{"color":"rgba(252,160,7,1)"}},"textfont":{"color":"rgba(252,160,7,1)"},"error_y":{"color":"rgba(252,160,7,1)"},"error_x":{"color":"rgba(252,160,7,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[66874917],"y":["san_francisco"],"orientation":"h","type":"bar","name":"SWORDFISH","marker":{"color":"rgba(251,185,30,1)","line":{"color":"rgba(251,185,30,1)"}},"textfont":{"color":"rgba(251,185,30,1)"},"error_y":{"color":"rgba(251,185,30,1)"},"error_x":{"color":"rgba(251,185,30,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[314699734],"y":["other"],"orientation":"h","type":"bar","name":"TROUT","marker":{"color":"rgba(247,211,64,1)","line":{"color":"rgba(247,211,64,1)"}},"textfont":{"color":"rgba(247,211,64,1)"},"error_y":{"color":"rgba(247,211,64,1)"},"error_x":{"color":"rgba(247,211,64,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[148661409,338280537,807574375,5703945,17626730,12153997427,1626886492],"y":["south_and_central_wa_coast","astoria","san_francisco","morro_bay","santa_barbara","los_angeles","san_diego"],"orientation":"h","type":"bar","name":"TUNA","marker":{"color":"rgba(241,237,111,1)","line":{"color":"rgba(241,237,111,1)"}},"textfont":{"color":"rgba(241,237,111,1)"},"error_y":{"color":"rgba(241,237,111,1)"},"error_x":{"color":"rgba(241,237,111,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1442726923,46587330,336421211,57785479,4451194,4200570546,668599642],"y":["puget_sound","bodega_bay","san_francisco","monterey","morro_bay","los_angeles","other"],"orientation":"h","type":"bar","name":"UNCLASSIFIED","marker":{"color":"rgba(252,255,164,1)","line":{"color":"rgba(252,255,164,1)"}},"textfont":{"color":"rgba(252,255,164,1)"},"error_y":{"color":"rgba(252,255,164,1)"},"error_x":{"color":"rgba(252,255,164,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Percent share per port</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>top90_products_percent <span class="ot">&lt;-</span> top90_products <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(io_pac_port_group) <span class="sc">%&gt;%</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">share =</span> wholesale <span class="sc">/</span> <span class="fu">sum</span>(wholesale)) <span class="sc">%&gt;%</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(top90_products_percent, <span class="at">file =</span> (<span class="fu">here</span>(<span class="st">"data/processed_products/port_products_revenue.csv"</span>)), <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Order ports by location</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>top90_products_percent<span class="sc">$</span>io_pac_port_group <span class="ot">&lt;-</span> <span class="fu">factor</span>(</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  top90_products_percent<span class="sc">$</span>io_pac_port_group,</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">levels =</span> port_location</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Interactive percent bar chart</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>bar_percent <span class="ot">&lt;-</span> <span class="fu">plot_ly</span>(</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> top90_products_percent,</span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> <span class="sc">~</span>share,</span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> <span class="sc">~</span>io_pac_port_group,</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">color =</span> <span class="sc">~</span>product_general,</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">type =</span> <span class="st">"bar"</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">orientation =</span> <span class="st">"h"</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">colors =</span> <span class="st">"inferno"</span>,</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>  <span class="at">text =</span> <span class="sc">~</span><span class="fu">paste0</span>(product_general, <span class="st">": "</span>, <span class="fu">percent</span>(share))</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>) <span class="sc">%&gt;%</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">barmode =</span> <span class="st">"stack"</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Share of Wholesale Revenue"</span>, <span class="at">tickformat =</span> <span class="st">".0%"</span>),</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Processor Port"</span>, <span class="at">autorange =</span> <span class="st">"reversed"</span>)</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>bar_percent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-ac67b64bb0f599b9aa28" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-ac67b64bb0f599b9aa28">{"x":{"visdat":{"4bb05ed67c9e":["function () ","plotlyVisDat"]},"cur_data":"4bb05ed67c9e","attrs":{"4bb05ed67c9e":{"x":{},"y":{},"orientation":"h","text":{},"color":{},"colors":"inferno","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"barmode":"stack","xaxis":{"domain":[0,1],"automargin":true,"title":"Share of Wholesale Revenue","tickformat":".0%"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Processor Port","autorange":"reversed","type":"category","categoryorder":"array","categoryarray":["north_wa_coast","puget_sound","south_and_central_wa_coast","astoria","columbia_river","tillamook","newport","coos_bay","brookings","crescent_city","eureka","fort_bragg","bodega_bay","san_francisco","monterey","morro_bay","santa_barbara","los_angeles","san_diego","other"]},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[0.099632254053272015],"y":["puget_sound"],"orientation":"h","text":"COD: 9.9632%","type":"bar","name":"COD","marker":{"color":"rgba(0,0,4,1)","line":{"color":"rgba(0,0,4,1)"}},"textfont":{"color":"rgba(0,0,4,1)"},"error_y":{"color":"rgba(0,0,4,1)"},"error_x":{"color":"rgba(0,0,4,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.17061566246314483,0.1876589352905623,0.3881917304773651,0.15290490772203622,0.15556021445842669,0.27663690989461831,0.38937814647361968,0.17216977898919841,0.36900701650114798,0.23973690850038332,0.088987956033536972,0.12275652935256758,0.045635526879292378,0.0454011225096956,0.080621248814152835],"y":["north_wa_coast","puget_sound","south_and_central_wa_coast","astoria","tillamook","newport","coos_bay","brookings","crescent_city","eureka","fort_bragg","bodega_bay","san_francisco","monterey","other"],"orientation":"h","text":["CRAB: 17.0616%","CRAB: 18.7659%","CRAB: 38.8192%","CRAB: 15.2905%","CRAB: 15.5560%","CRAB: 27.6637%","CRAB: 38.9378%","CRAB: 17.2170%","CRAB: 36.9007%","CRAB: 23.9737%","CRAB: 8.8988%","CRAB: 12.2757%","CRAB: 4.5636%","CRAB: 4.5401%","CRAB: 8.0621%"],"type":"bar","name":"CRAB","marker":{"color":"rgba(8,5,30,1)","line":{"color":"rgba(8,5,30,1)"}},"textfont":{"color":"rgba(8,5,30,1)"},"error_y":{"color":"rgba(8,5,30,1)"},"error_x":{"color":"rgba(8,5,30,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.088637059427183806,0.088452187720570077,0.088792928580520084,0.30278662088641273,0.12402778293581437,0.13856102770293049],"y":["astoria","newport","brookings","eureka","fort_bragg","morro_bay"],"orientation":"h","text":["FLOUNDER: 8.8637%","FLOUNDER: 8.8452%","FLOUNDER: 8.8793%","FLOUNDER: 30.2787%","FLOUNDER: 12.4028%","FLOUNDER: 13.8561%"],"type":"bar","name":"FLOUNDER","marker":{"color":"rgba(25,12,62,1)","line":{"color":"rgba(25,12,62,1)"}},"textfont":{"color":"rgba(25,12,62,1)"},"error_y":{"color":"rgba(25,12,62,1)"},"error_x":{"color":"rgba(25,12,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.041084889136327393,0.14762034949279479,0.2878905281400394,0.33010319767036445,0.25069230864936076,0.26785960755482324],"y":["puget_sound","south_and_central_wa_coast","astoria","newport","crescent_city","other"],"orientation":"h","text":["HAKE: 4.1085%","HAKE: 14.7620%","HAKE: 28.7891%","HAKE: 33.0103%","HAKE: 25.0692%","HAKE: 26.7860%"],"type":"bar","name":"HAKE","marker":{"color":"rgba(48,10,91,1)","line":{"color":"rgba(48,10,91,1)"}},"textfont":{"color":"rgba(48,10,91,1)"},"error_y":{"color":"rgba(48,10,91,1)"},"error_x":{"color":"rgba(48,10,91,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.04800751708648987,0.043791812948485095,0.12396980501203558,0.075645419601762853,0.021706317300353894],"y":["puget_sound","san_francisco","morro_bay","santa_barbara","other"],"orientation":"h","text":["HALIBUT: 4.8008%","HALIBUT: 4.3792%","HALIBUT: 12.3970%","HALIBUT: 7.5645%","HALIBUT: 2.1706%"],"type":"bar","name":"HALIBUT","marker":{"color":"rgba(70,11,106,1)","line":{"color":"rgba(70,11,106,1)"}},"textfont":{"color":"rgba(70,11,106,1)"},"error_y":{"color":"rgba(70,11,106,1)"},"error_x":{"color":"rgba(70,11,106,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.031635345855420272],"y":["monterey"],"orientation":"h","text":"HERRING: 3.1635%","type":"bar","name":"HERRING","marker":{"color":"rgba(92,18,110,1)","line":{"color":"rgba(92,18,110,1)"}},"textfont":{"color":"rgba(92,18,110,1)"},"error_y":{"color":"rgba(92,18,110,1)"},"error_x":{"color":"rgba(92,18,110,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.038860015394367807],"y":["santa_barbara"],"orientation":"h","text":"JACK: 3.8860%","type":"bar","name":"JACK","marker":{"color":"rgba(114,26,110,1)","line":{"color":"rgba(114,26,110,1)"}},"textfont":{"color":"rgba(114,26,110,1)"},"error_y":{"color":"rgba(114,26,110,1)"},"error_x":{"color":"rgba(114,26,110,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.66457952668245845,0.27082303357583326,0.14008778398107644,0.064708934163466611,0.66627006989486404,0.023402214237650359,0.25027514858928396],"y":["fort_bragg","bodega_bay","monterey","morro_bay","santa_barbara","los_angeles","san_diego"],"orientation":"h","text":["OTHER: 66.4580%","OTHER: 27.0823%","OTHER: 14.0088%","OTHER: 6.4709%","OTHER: 66.6270%","OTHER: 2.3402%","OTHER: 25.0275%"],"type":"bar","name":"OTHER","marker":{"color":"rgba(135,33,107,1)","line":{"color":"rgba(135,33,107,1)"}},"textfont":{"color":"rgba(135,33,107,1)"},"error_y":{"color":"rgba(135,33,107,1)"},"error_x":{"color":"rgba(135,33,107,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.26766800641814936,0.099250497562041809,0.25406396010538512,0.042413154210670885],"y":["south_and_central_wa_coast","tillamook","brookings","eureka"],"orientation":"h","text":["OYSTERS: 26.7668%","OYSTERS: 9.9250%","OYSTERS: 25.4064%","OYSTERS: 4.2413%"],"type":"bar","name":"OYSTERS","marker":{"color":"rgba(156,41,100,1)","line":{"color":"rgba(156,41,100,1)"}},"textfont":{"color":"rgba(156,41,100,1)"},"error_y":{"color":"rgba(156,41,100,1)"},"error_x":{"color":"rgba(156,41,100,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.27628417128537253,0.2501100745301244],"y":["puget_sound","other"],"orientation":"h","text":["POLLOCK: 27.6284%","POLLOCK: 25.0110%"],"type":"bar","name":"POLLOCK","marker":{"color":"rgba(177,50,90,1)","line":{"color":"rgba(177,50,90,1)"}},"textfont":{"color":"rgba(177,50,90,1)"},"error_y":{"color":"rgba(177,50,90,1)"},"error_x":{"color":"rgba(177,50,90,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.068535164126556983,0.1038428786553966,0.069186035906562415,0.15349524299763906,0.12240473434819021,0.19952494018137742],"y":["astoria","tillamook","brookings","eureka","fort_bragg","morro_bay"],"orientation":"h","text":["ROCKFISH: 6.8535%","ROCKFISH: 10.3843%","ROCKFISH: 6.9186%","ROCKFISH: 15.3495%","ROCKFISH: 12.2405%","ROCKFISH: 19.9525%"],"type":"bar","name":"ROCKFISH","marker":{"color":"rgba(196,60,78,1)","line":{"color":"rgba(196,60,78,1)"}},"textfont":{"color":"rgba(196,60,78,1)"},"error_y":{"color":"rgba(196,60,78,1)"},"error_x":{"color":"rgba(196,60,78,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.19467985547266492,0.10840779113035275,0.093885450653933125,0.1152825824763663,0.10363098974807063],"y":["north_wa_coast","newport","coos_bay","eureka","morro_bay"],"orientation":"h","text":["SABLEFISH: 19.4680%","SABLEFISH: 10.8408%","SABLEFISH: 9.3885%","SABLEFISH: 11.5283%","SABLEFISH: 10.3631%"],"type":"bar","name":"SABLEFISH","marker":{"color":"rgba(214,75,64,1)","line":{"color":"rgba(214,75,64,1)"}},"textfont":{"color":"rgba(214,75,64,1)"},"error_y":{"color":"rgba(214,75,64,1)"},"error_x":{"color":"rgba(214,75,64,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.63470448206419028,0.30084984992186586,0.059969855844650255,0.14856417703940661,0.43247804715817456,0.13238247863595237,0.24527824861400996,0.10141943367156941,0.083925187708072058,0.030449367223512287,0.19464361272424285],"y":["north_wa_coast","puget_sound","astoria","coos_bay","bodega_bay","san_francisco","morro_bay","santa_barbara","los_angeles","san_diego","other"],"orientation":"h","text":["SALMON: 63.4704%","SALMON: 30.0850%","SALMON: 5.9970%","SALMON: 14.8564%","SALMON: 43.2478%","SALMON: 13.2382%","SALMON: 24.5278%","SALMON: 10.1419%","SALMON: 8.3925%","SALMON: 3.0449%","SALMON: 19.4644%"],"type":"bar","name":"SALMON","marker":{"color":"rgba(229,92,48,1)","line":{"color":"rgba(229,92,48,1)"}},"textfont":{"color":"rgba(229,92,48,1)"},"error_y":{"color":"rgba(229,92,48,1)"},"error_x":{"color":"rgba(229,92,48,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.068318952528062027,0.084433616648065049],"y":["astoria","monterey"],"orientation":"h","text":["SARDINE: 6.8319%","SARDINE: 8.4434%"],"type":"bar","name":"SARDINE","marker":{"color":"rgba(240,112,32,1)","line":{"color":"rgba(240,112,32,1)"}},"textfont":{"color":"rgba(240,112,32,1)"},"error_y":{"color":"rgba(240,112,32,1)"},"error_x":{"color":"rgba(240,112,32,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.14883509197064104,0.17824892953085955,0.64134640932413489,0.19639991358409442,0.3681722258330406,0.41578729641833401,0.38030067484949126,0.14628549092852772,0.035348891189577868,0.25760809815028957,0.056372452253307913],"y":["south_and_central_wa_coast","astoria","tillamook","newport","coos_bay","brookings","crescent_city","eureka","san_francisco","los_angeles","other"],"orientation":"h","text":["SHRIMP: 14.8835%","SHRIMP: 17.8249%","SHRIMP: 64.1346%","SHRIMP: 19.6400%","SHRIMP: 36.8172%","SHRIMP: 41.5787%","SHRIMP: 38.0301%","SHRIMP: 14.6285%","SHRIMP: 3.5349%","SHRIMP: 25.7608%","SHRIMP: 5.6372%"],"type":"bar","name":"SHRIMP","marker":{"color":"rgba(248,135,14,1)","line":{"color":"rgba(248,135,14,1)"}},"textfont":{"color":"rgba(248,135,14,1)"},"error_y":{"color":"rgba(248,135,14,1)"},"error_x":{"color":"rgba(248,135,14,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.65150979410300258,0.074764683807337806],"y":["monterey","santa_barbara"],"orientation":"h","text":["SQUID: 65.1510%","SQUID: 7.4765%"],"type":"bar","name":"SQUID","marker":{"color":"rgba(252,160,7,1)","line":{"color":"rgba(252,160,7,1)"}},"textfont":{"color":"rgba(252,160,7,1)"},"error_y":{"color":"rgba(252,160,7,1)"},"error_x":{"color":"rgba(252,160,7,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.041026228249040057],"y":["san_francisco"],"orientation":"h","text":"SWORDFISH: 4.1026%","type":"bar","name":"SWORDFISH","marker":{"color":"rgba(251,185,30,1)","line":{"color":"rgba(251,185,30,1)"}},"textfont":{"color":"rgba(251,185,30,1)"},"error_y":{"color":"rgba(251,185,30,1)"},"error_x":{"color":"rgba(251,185,30,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.041185489486711309],"y":["other"],"orientation":"h","text":"TROUT: 4.1185%","type":"bar","name":"TROUT","marker":{"color":"rgba(247,211,64,1)","line":{"color":"rgba(247,211,64,1)"}},"textfont":{"color":"rgba(247,211,64,1)"},"error_y":{"color":"rgba(247,211,64,1)"},"error_x":{"color":"rgba(247,211,64,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.047684821641049702,0.095494602680611787,0.49542836272717722,0.069831538236998406,0.043040377630098048,0.47195207544184709,0.71927548418720377],"y":["south_and_central_wa_coast","astoria","san_francisco","morro_bay","santa_barbara","los_angeles","san_diego"],"orientation":"h","text":["TUNA: 4.7685%","TUNA: 9.5495%","TUNA: 49.5428%","TUNA: 6.9832%","TUNA: 4.3040%","TUNA: 47.1952%","TUNA: 71.9275%"],"type":"bar","name":"TUNA","marker":{"color":"rgba(241,237,111,1)","line":{"color":"rgba(241,237,111,1)"}},"textfont":{"color":"rgba(241,237,111,1)"},"error_y":{"color":"rgba(241,237,111,1)"},"error_x":{"color":"rgba(241,237,111,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[0.046482383226110029,0.17394238991342456,0.20638669937047499,0.046932336902740047,0.05449451634111091,0.16311242446214094,0.087501197336283559],"y":["puget_sound","bodega_bay","san_francisco","monterey","morro_bay","los_angeles","other"],"orientation":"h","text":["UNCLASSIFIED: 4.6482%","UNCLASSIFIED: 17.3942%","UNCLASSIFIED: 20.6387%","UNCLASSIFIED: 4.6932%","UNCLASSIFIED: 5.4495%","UNCLASSIFIED: 16.3112%","UNCLASSIFIED: 8.7501%"],"type":"bar","name":"UNCLASSIFIED","marker":{"color":"rgba(252,255,164,1)","line":{"color":"rgba(252,255,164,1)"}},"textfont":{"color":"rgba(252,255,164,1)"},"error_y":{"color":"rgba(252,255,164,1)"},"error_x":{"color":"rgba(252,255,164,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>
<section id="employment-per-port" class="level1">
<h1>Employment per port</h1>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Find monthly average employment for each state</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>monthly_emp_port <span class="ot">&lt;-</span> processor_port_emp <span class="sc">%&gt;%</span> </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(io_pac_port_group, year, month) <span class="sc">%&gt;%</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">avg_emp =</span> <span class="fu">mean</span>(employees, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">make_date</span>(year, month, <span class="dv">1</span>))</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>monthly_emp_port<span class="sc">$</span>io_pac_port_group <span class="ot">&lt;-</span> <span class="fu">factor</span>(monthly_emp_port<span class="sc">$</span>io_pac_port_group, <span class="at">levels =</span> port_location)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot average monthly employee count over time by state</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(monthly_emp_port, <span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> avg_emp, <span class="at">group =</span> io_pac_port_group, <span class="at">color =</span> io_pac_port_group)) <span class="sc">+</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="at">linewidth =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>() <span class="sc">+</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">date_breaks =</span> <span class="st">"10 years"</span>, </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="st">"%Y"</span>, </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">limits =</span> <span class="fu">c</span>(<span class="fu">as.Date</span>(<span class="st">"1970-01-01"</span>), <span class="cn">NA</span>), </span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Average Monthly Processor Employee Count"</span>) <span class="sc">+</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Year"</span>) <span class="sc">+</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Number of Employees"</span>) <span class="sc">+</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">color =</span> <span class="st">"Port"</span>) <span class="sc">+</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> io_pac_port_group) <span class="sc">+</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="fl">0.5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="ports-eda_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="1344"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="individual-port-species" class="level1">
<h1>Individual Port Species</h1>
<section id="north-wa-coast" class="level2">
<h2 class="anchored" data-anchor-id="north-wa-coast">North WA Coast</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>northwa_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"north_wa_coast"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>northwa_top_90 <span class="ot">&lt;-</span> northwa_products <span class="sc">%&gt;%</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>northwa_top_products <span class="ot">&lt;-</span> northwa_products <span class="sc">%&gt;%</span> </span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> northwa_top_90)</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(northwa_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"North WA Coast Products in top 90% of Revenue"</span>,</span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-4c72fdb3ddbe5bcee863" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-4c72fdb3ddbe5bcee863">{"x":{"visdat":{"4bb056795cb7":["function () ","plotlyVisDat"]},"cur_data":"4bb056795cb7","attrs":{"4bb056795cb7":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"North WA Coast Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3125,3200,2100,818,11474,16377,21803,71807,32130,10600,10110,14267,11826,33975,18900,1800,9300,1489600,420800,534400,462795,406493,475075,2777540,1285950,2556470,2622100,964922,2438223,639154,1636550,3144413,2430257,2121962,1304280,1715646,1766076,2414169,1057051,1376944,1561982,1561982,1561982,1561982],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1989,1990,1991,1992,1993,1997,1998,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[363,10998,64598,43400,7600,4212,1040,659083,1236030,1147300,1212760,1079925,738956,1084891,431143,341976,622927,537616,357786,440567,430940,706752,971008,789913,899343,573155,546070,546070,546070],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1980,1981,1982,1983,1984,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2009,2010,2011,2015,2019,2020],"y":[43405,47185,47081,4550,576,2300,9720,12600,6000,8400,14800,11748,12837,26040,10000,18000,74380,11500,10275,2200,6946,16900,17879,7958,8604,11117,6893,5184,210,771,675,489,447,456],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1989,1990,1991,1992,1997,1998,1999,2000,2001,2002,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[111,1626,36426,1613,672363,689992,2309955,3407363,2585379,2325481,2967880,3444573,874747,1536071,2355262,2226885,2717301,3546133,2124936,1255629,1683591,1263957,1869066,2755030,2626264,1292454,493619,500615,500615,500615],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[146856,192399,144900,202269,277531,241775,262729,340026,145550,391570,509555,606008,740026,658421,666681,750426,854679,635820,5012486,3781045,2962786,9106556,7340684,6244553,6326780,2588077,5766528,1722751,1876035,1556202,5207472,8055536,7588458,2027860,3309345,2406366,2514468,3779037,1051766,1983603,2227486,4347772,3004990,3112519,3862356,4192770,2279327,2578611,2696751,2464579,1690850,1120130,8260652,8260652,8260652],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2006,2007,2008,2011,2014],"y":[9050,7500,10320,8400,11100,3650,17500,21150,25020,23328,17725,56550,52740,15120,6480,13440,9069,11786,28704,18340,10135,377010,394265,14616,9225,2700,6000,557,9856,7101,8506,18362,4396,20419,4298,27901,200,286,2580,1463,732],"mode":"lines+markers","type":"scatter","name":"STURGEON","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="puget-sound" class="level2">
<h2 class="anchored" data-anchor-id="puget-sound">Puget Sound</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>puget_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"puget_sound"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>puget_top_90 <span class="ot">&lt;-</span> puget_products <span class="sc">%&gt;%</span> </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>puget_top_products <span class="ot">&lt;-</span> puget_products <span class="sc">%&gt;%</span> </span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> puget_top_90)</span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(puget_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb10-23"><a href="#cb10-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb10-24"><a href="#cb10-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb10-25"><a href="#cb10-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb10-26"><a href="#cb10-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Puget Sound Products in top 90% of Revenue"</span>,</span>
<span id="cb10-27"><a href="#cb10-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb10-28"><a href="#cb10-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-21d90cdaf4dc5aceca31" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-21d90cdaf4dc5aceca31">{"x":{"visdat":{"4bb0495517b6":["function () ","plotlyVisDat"]},"cur_data":"4bb0495517b6","attrs":{"4bb0495517b6":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Puget Sound Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1995,1996,1997,1998,1999,2000,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[31377,44573,42053,152829,90469,109427,1057771,1600087,2265638,4008168,2329338,1921643,4678430,4429770,6566460,4663439,3840307,3120370,2030803,1764601,1817189,8190,200967,163250,737984,173732,318775,43608,13384,8016,14200000,9360000,8060694,9334918,9521616,9712048,9906289,10104415,13175412,13438920,13707698,13981852,9369039,9369039,9369039,10752210],"mode":"lines+markers","type":"scatter","name":"CLAMS","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[340387,601662,1116642,1555207,1599814,2378628,3170489,3774753,2959725,4309683,2935380,2486376,8586276,9744777,9373582,10246679,7723158,19160499,24680651,19726054,95835846,206270932,218689417,55836696,62732868,56620210,83974357,9073938,9625253,9935122,11131854,13776414,13462229,13695139,18356603,17553714,16561288,23506415,45976243,90486905,55683110,62012080,112572357,124189361,113587909,131598658,192160844,190413772,179128728,118707422,116880016,119146531,118986168,123624301,124137167],"mode":"lines+markers","type":"scatter","name":"COD","marker":{"color":"rgba(181,176,137,1)","line":{"color":"rgba(181,176,137,1)"}},"textfont":{"color":"rgba(181,176,137,1)"},"error_y":{"color":"rgba(181,176,137,1)"},"error_x":{"color":"rgba(181,176,137,1)"},"line":{"color":"rgba(181,176,137,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1511053,1420125,1476482,2275805,4808999,653894,3600301,1274893,1868423,1943285,1177330,1645272,84182771,39625648,34827962,44249016,27546719,49508183,101959068,62259843,383304624,480680349,524550130,466623650,42996021,52406294,71113785,40537433,44793106,62717447,75741225,81084212,43086684,32145788,24743782,31426972,32093944,31380617,39479971,93341199,123247739,73950112,160817143,180523315,146378626,216582789,161933358,170601025,192607047,189813404,213791045,218066865,218066865,218066865,218076630],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(233,153,110,1)","line":{"color":"rgba(233,153,110,1)"}},"textfont":{"color":"rgba(233,153,110,1)"},"error_y":{"color":"rgba(233,153,110,1)"},"error_x":{"color":"rgba(233,153,110,1)"},"line":{"color":"rgba(233,153,110,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1987,1988,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[499656,280656,170843,689414,1345506,2634289,2059290,2779354,3118605,1997817,3412167,3034198,2748079,4558634,6959992,9476991,9280707,11845557,10568034,8757392,6291780,5023845,10704538,6791605,8372355,3591903,2921333,2979760,3039355,3100142,3162145,3225388,3225388,3225388,3225388],"mode":"lines+markers","type":"scatter","name":"DORADO","marker":{"color":"rgba(232,146,123,1)","line":{"color":"rgba(232,146,123,1)"}},"textfont":{"color":"rgba(232,146,123,1)"},"error_y":{"color":"rgba(232,146,123,1)"},"error_x":{"color":"rgba(232,146,123,1)"},"line":{"color":"rgba(232,146,123,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[358215,1094290,1055920,1710360,2071479,2582956,3613622,5065975,2586413,4330354,2508102,3194900,5237624,4063334,3119280,4815925,3131857,4612699,1678855,4754912,38946681,38387302,68467502,11173389,13301927,11529040,25592704,8300035,5363731,5279895,6456334,8863191,11571310,6044357,6462190,5924627,6043121,4486286,10588377,9994650,6651168,10575811,11273205,9289204,9411400,8674033,9489327,7318512,6659026,5090962,3500401,3570408,1436305,1338181,1298793],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(191,154,166,1)","line":{"color":"rgba(191,154,166,1)"}},"textfont":{"color":"rgba(191,154,166,1)"},"error_y":{"color":"rgba(191,154,166,1)"},"error_x":{"color":"rgba(191,154,166,1)"},"line":{"color":"rgba(191,154,166,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2146915,2330860,2331545,2701649,2077096,5986377,763744,1518695,6889989,27575566,22998158,15590473,24453957,17267142,17004296,34714844,20149607,20456112,19939129,17452762,23521234,21765231,32769137,43900536,33317654,26430495,115196443,71932936,73058453,74158225,26446566,39663231,42046611,28544108,40361016,50295640,36764073,50527715,37189897,57846347,47641731,37472527],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(147,159,203,1)","line":{"color":"rgba(147,159,203,1)"}},"textfont":{"color":"rgba(147,159,203,1)"},"error_y":{"color":"rgba(147,159,203,1)"},"error_x":{"color":"rgba(147,159,203,1)"},"line":{"color":"rgba(147,159,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[142892,5089201,3801850,6444736,5296068,3443384,5557135,5122458,3253378,4180871,1893912,3304075,1999596,3393383,9859280,3090572,8489569,9939897,21382423,27076384,84367303,93559597,128077621,83546664,35607557,33148156,63972701,32921234,29383090,25166586,39937499,47744554,36831242,26836756,30752472,33421149,33408518,25843401,26312459,74020297,52309227,54653821,26801800,14920253,15884276,13693470,11930812,12146488,16876534,23549320,25409876,25918074,25918074,27394392,25037911],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(187,151,199,1)","line":{"color":"rgba(187,151,199,1)"}},"textfont":{"color":"rgba(187,151,199,1)"},"error_y":{"color":"rgba(187,151,199,1)"},"error_x":{"color":"rgba(187,151,199,1)"},"line":{"color":"rgba(187,151,199,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[35000,33112,87135,208473,40394,615600,116000,121123,2486037,611754,3444005,1536315,3928639,1783196,131470,584068,563354,449618,691230,34923335,17729183,19531064,20668055,15400172,8798554,8680404,13636861,18841714,9192098,5386921,1386000,1614024,448765,61179,75362,76869,26152,26675,106209,27753,28308,295124,264666,139008,151677,180173,227976,244402,233905,238583,243355,176437,170850,170850],"mode":"lines+markers","type":"scatter","name":"HERRING","marker":{"color":"rgba(222,141,196,1)","line":{"color":"rgba(222,141,196,1)"}},"textfont":{"color":"rgba(222,141,196,1)"},"error_y":{"color":"rgba(222,141,196,1)"},"error_x":{"color":"rgba(222,141,196,1)"},"line":{"color":"rgba(222,141,196,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[35557,151005,49817,37740,708243,1076732,1004132,1619828,1707245,1467433,2056574,1490050,2722889,1294803,731648,15283231,2438328,4930408,17565212,8626452,3891325,12284189,2781031,5603236,3806345,1921304,2903377,740992,1821034,1219776,1142206,971853,975024,1078182,2624825,4856705,2534355,1267563,2223259,2702501,354229,1224795,1419693,2304216,1332517,29886546,2224090,2268572,2313943,2313943,2316073,2316073],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(217,164,165,1)","line":{"color":"rgba(217,164,165,1)"}},"textfont":{"color":"rgba(217,164,165,1)"},"error_y":{"color":"rgba(217,164,165,1)"},"error_x":{"color":"rgba(217,164,165,1)"},"line":{"color":"rgba(217,164,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2354630,2947396,2300983,3546266,3352584,3028792,2969366,3994955,3590578,6244287,1538737,2406242,4035876,4624654,6183622,5317981,4765165,5298536,5622896,4737005,3411534,3751201,3955937,4289981,3851191,2048834,4009687,3355402,21432647,4710838,5492863,4431091,4160509,3370456,3963884,4919511,5199979,13758398,6866365,12662203,9673812,9207960,20216761,20712399,19693630,20269131,20739954,31583618,30874160,31378324,32122337,16443332,16443332,16443332,19276113],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(191,196,121,1)","line":{"color":"rgba(191,196,121,1)"}},"textfont":{"color":"rgba(191,196,121,1)"},"error_y":{"color":"rgba(191,196,121,1)"},"error_x":{"color":"rgba(191,196,121,1)"},"line":{"color":"rgba(191,196,121,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1972,1974,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[120935,9500,90746,44640,97517,179616,136803,348205,1545817,2048437,14215470,30623698,53351402,360844302,697304566,882628468,345123486,285512834,306449465,437337582,125281879,88265994,98452503,98210895,132529876,90972467,96110906,84970161,102262851,98544513,107686360,124584866,347383666,126280691,195452668,322839675,283533261,279118003,302818401,276024133,290971201,273128216,196171197,207468293,202400156,196222770,205730875,203918040],"mode":"lines+markers","type":"scatter","name":"POLLOCK","marker":{"color":"rgba(178,216,80,1)","line":{"color":"rgba(178,216,80,1)"}},"textfont":{"color":"rgba(178,216,80,1)"},"error_y":{"color":"rgba(178,216,80,1)"},"error_x":{"color":"rgba(178,216,80,1)"},"line":{"color":"rgba(178,216,80,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[551466,2315825,2406016,2633088,3181246,3044819,1729059,3433803,4241026,4320996,2577863,3310249,5679471,4890112,2026574,5005431,7992352,10047433,9564080,19485544,42545129,52106980,24985586,9519035,10097415,9285163,10217943,9692539,4939766,5165152,5799620,12896023,7321473,2936271,3106578,3255160,3093767,3018622,2805107,2587319,2379457,1279026,1309780,1396195,1359207,1257368,1843245,2484798,3347604,2383818,2100484,2142494,595091,2093584,3237356],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(215,217,67,1)","line":{"color":"rgba(215,217,67,1)"}},"textfont":{"color":"rgba(215,217,67,1)"},"error_y":{"color":"rgba(215,217,67,1)"},"error_x":{"color":"rgba(215,217,67,1)"},"line":{"color":"rgba(215,217,67,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[88357,114679,95851,109818,174400,88700,112250,38869,35916,40002,10560,85075,386605,366142,288675,722151,501331,152989,301671,4720226,53775461,63823246,74111581,43196879,44571827,43065254,55728182,4607072,2069285,1480804,3138427,3498942,4039693,2823023,2710149,3565526,3613754,3561635,8410142,8960819,1017409,1054893,5000351,2420493,3016925,2875705,2502844,2384065,2616094,877545,311119,317341,93025,915700,87846],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(250,217,50,1)","line":{"color":"rgba(250,217,50,1)"}},"textfont":{"color":"rgba(250,217,50,1)"},"error_y":{"color":"rgba(250,217,50,1)"},"error_x":{"color":"rgba(250,217,50,1)"},"line":{"color":"rgba(250,217,50,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[11177373,13143879,24103894,19712016,25481528,34605473,26263049,23545553,29478210,15203698,18227602,13519475,30692592,24685829,22488676,29164309,31126024,43355914,60275630,76222661,811390909,797569583,730859289,790200352,79829687,79011033,67192917,74681315,49997816,52223089,53986984,76677047,61770085,49217327,52663984,56329080,60228481,66248448,116773087,123505541,173955103,210035834,237830892,282762063,316700303,328004102,314470853,327386150,334203932,275132194,319972198,326371641,424390154,306956663,336819566],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(247,209,91,1)","line":{"color":"rgba(247,209,91,1)"}},"textfont":{"color":"rgba(247,209,91,1)"},"error_y":{"color":"rgba(247,209,91,1)"},"error_x":{"color":"rgba(247,209,91,1)"},"line":{"color":"rgba(247,209,91,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2023],"y":[34256,44400,63300,155392,102919,299131,532508,1338047,1748031,2869063,1206526,36591,1839089,1955434,1138747,55255,166504,7342967,8995323,740564,71252,69188,2399423,2133865,2278459,2658717,1436014,1911281,2841626,4184969,6578993,7171290,5062118,3053051,2867251,23647685,24120638,24476187,1621438,795139,1317882,509735,433507,342042,227422,112647,114900,117198,119542,6000],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(236,201,129,1)","line":{"color":"rgba(236,201,129,1)"}},"textfont":{"color":"rgba(236,201,129,1)"},"error_y":{"color":"rgba(236,201,129,1)"},"error_x":{"color":"rgba(236,201,129,1)"},"line":{"color":"rgba(236,201,129,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[320150,312600,16992,67116,45989,4793723,4636381,5861935,5028266,9301167,9325946,6740667,7775375,7969014,7356557,7851396,7064384,7554553,7462649,3126229,4117955,3911380,3338210,3411541,3592165,3738988,3925200,3258592,3158031,3571840,2753759,2816578,2029708,1013739,1034014,1054694,1075788,1097304,1119250,1119250,1119250,1119250],"mode":"lines+markers","type":"scatter","name":"SWORDFISH","marker":{"color":"rgba(221,193,154,1)","line":{"color":"rgba(221,193,154,1)"}},"textfont":{"color":"rgba(221,193,154,1)"},"error_y":{"color":"rgba(221,193,154,1)"},"error_x":{"color":"rgba(221,193,154,1)"},"line":{"color":"rgba(221,193,154,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2695259,3006885,3920355,3981395,1450581,2621001,1828658,1747883,7556,8608,11527,5870,181710,21844,750,25642,11748,44602,2052135,2662171,4887521,1750925,3037437,9055085,8084714,8448671,10175822,10332588,9823910,11060775,8229385,6737987,6243807,9351131,9490595,6123945,6386794,6277293,6069490,28486111,15731233,17652151,19284091,15469651,18393679,18147895,10763863,15377712,8709632,13818701,15470397,15860435,14743853,17735652,29434914],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(201,186,167,1)","line":{"color":"rgba(201,186,167,1)"}},"textfont":{"color":"rgba(201,186,167,1)"},"error_y":{"color":"rgba(201,186,167,1)"},"error_x":{"color":"rgba(201,186,167,1)"},"line":{"color":"rgba(201,186,167,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2478825,2978651,3366072,7506711,8776051,10011045,10167892,14428903,7104254,8020520,10647933,8037703,8455669,9385988,7817698,7305157,6550483,9493522,11614253,22120986,15608234,10187878,10368837,8021199,3250950,1609074,36041288,33939129,1935329,1935322,2161004,5106139,4198687,2887007,3140861,3772046,3526228,13146155,8329837,105937449,27942628,46813143,96506026,99574725,100267755,95513225,91321894,80312009,78935008,57115346,46652938,43027001,43078617,43221550,41074089],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="south-and-central-wa-coast" class="level2">
<h2 class="anchored" data-anchor-id="south-and-central-wa-coast">South and Central WA Coast</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>southcenwa_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"south_and_central_wa_coast"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>southcenwa_top_90 <span class="ot">&lt;-</span> southcenwa_products <span class="sc">%&gt;%</span> </span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>southcenwa_top_products <span class="ot">&lt;-</span> southcenwa_products <span class="sc">%&gt;%</span> </span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> southcenwa_top_90)</span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(southcenwa_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"South and Central WA Coast Products in top 90% of Revenue"</span>,</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-c8c7f5404f4f064f4217" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-c8c7f5404f4f064f4217">{"x":{"visdat":{"4bb06a253654":["function () ","plotlyVisDat"]},"cur_data":"4bb06a253654","attrs":{"4bb06a253654":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"South and Central WA Coast Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1977,1978,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2008,2009,2014,2015,2016,2017],"y":[428643,190298,39064,526582,3267733,2398908,2837447,2956407,1883905,14338088,14223674,1828691,3022157,2493420,2914636,2868443,4472658,1669811,1393220,125330,201745,14048,40134,23250,26823,28604,41,1416,150,542,667,162],"mode":"lines+markers","type":"scatter","name":"COD","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2566530,2183091,2108872,1794624,1486804,1698978,4048923,3109007,6062861,5181914,3164060,4583724,11945116,3903711,6309746,4929857,5151396,4247828,4557680,9799070,13492247,14505989,10885879,12619783,14196600,17932399,18719615,7996016,7043840,7069570,21939485,28287976,19201114,11162355,31440507,31998982,26795971,37480430,27729721,28359764,26106186,41087779,42395220,42954842,63531820,67720291,50285387,46483853,43682873,41048515,42993817,52784451,49707020,57969045,63776966],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(211,164,122,1)","line":{"color":"rgba(211,164,122,1)"}},"textfont":{"color":"rgba(211,164,122,1)"},"error_y":{"color":"rgba(211,164,122,1)"},"error_x":{"color":"rgba(211,164,122,1)"},"line":{"color":"rgba(211,164,122,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1978,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2008,2009],"y":[220587,291636,4065976,1620809,1432501,894343,985270,1164856,860712,1132481,2814492,2395199,1858703,1905293,1367985,1889068,3082417,3323845,184766,78741,144138,171355,123293,96451,10,860],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(229,147,127,1)","line":{"color":"rgba(229,147,127,1)"}},"textfont":{"color":"rgba(229,147,127,1)"},"error_y":{"color":"rgba(229,147,127,1)"},"error_x":{"color":"rgba(229,147,127,1)"},"line":{"color":"rgba(229,147,127,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[48694,33889,279889,579880,148259,1107368,2840404,1505077,1795003,2832002,4225586,7284098,3956857,9712384,9906632,13018153,14300357,18026808,35144462,17780324,19585034,22398798,20971620,2698437,4763666,2890631,15861220,21034896,17322613,20402141,16347822,22622853,114775973,14016923],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(156,159,194,1)","line":{"color":"rgba(156,159,194,1)"}},"textfont":{"color":"rgba(156,159,194,1)"},"error_y":{"color":"rgba(156,159,194,1)"},"error_x":{"color":"rgba(156,159,194,1)"},"line":{"color":"rgba(156,159,194,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1978,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3667150,380000,402318,876250,1185849,1911052,2023816,2535518,3232485,2794874,3628790,3574130,3688104,4500369,3509250,3515105,3401500,4694772,3992470,2730314,1238354,3026910,2137799,1763000,1179331,63489,121129,188072,88971,190797,122940,148018,175770,2908,24473,24962,24962,3025,3025],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(194,150,199,1)","line":{"color":"rgba(194,150,199,1)"}},"textfont":{"color":"rgba(194,150,199,1)"},"error_y":{"color":"rgba(194,150,199,1)"},"error_x":{"color":"rgba(194,150,199,1)"},"line":{"color":"rgba(194,150,199,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3003791,3229055,3512328,3128665,3553960,3460197,3331731,3559498,4652314,4781300,4251239,5604204,5620187,4401092,5359330,7340020,2822032,10412251,9999497,7636171,13924401,19830870,13925595,9265698,20941501,12700564,24116705,12736576,13955149,14048185,15027242,16190954,15548779,15045576,14264009,15990435,19846718,8195860,26369496,22638900,19337727,24407320,20729585,19660093,20037749,25457809,25167363,25710093,30613330,29951185,30548675,31159647,31159873,41734641,34580172],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(223,155,177,1)","line":{"color":"rgba(223,155,177,1)"}},"textfont":{"color":"rgba(223,155,177,1)"},"error_y":{"color":"rgba(223,155,177,1)"},"error_x":{"color":"rgba(223,155,177,1)"},"line":{"color":"rgba(223,155,177,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2014,2015,2016,2017,2019,2020,2021,2022,2023],"y":[1330853,238390,376695,280706,1357096,202575,24544,567331,689261,160515,1219738,1850561,1138432,693259,434236,667787,177585,446057,2549895,2868646,1220050,868697,567704,341479,138130,187413,10507,2547,2598,11838,2200,4945,5073,501,2946166,1398413,2671558,1717598,2624656],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(182,204,108,1)","line":{"color":"rgba(182,204,108,1)"}},"textfont":{"color":"rgba(182,204,108,1)"},"error_y":{"color":"rgba(182,204,108,1)"},"error_x":{"color":"rgba(182,204,108,1)"},"line":{"color":"rgba(182,204,108,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1974,1975,1977,1978,1981,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3600,73253,2627,4729,1750,609637,325268,60906,116479,482970,751983,741969,163273,395250,162371,222109,1414739,1462656,1895774,1301764,126867,133431,41319,167605,748441,828483,182053,279933,589666,105657,215482,120071,926782,663971,304292,184554,537653,360160,414348,251575,4515,4605,4697,4697,4697,4697],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(209,217,69,1)","line":{"color":"rgba(209,217,69,1)"}},"textfont":{"color":"rgba(209,217,69,1)"},"error_y":{"color":"rgba(209,217,69,1)"},"error_x":{"color":"rgba(209,217,69,1)"},"line":{"color":"rgba(209,217,69,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[446996,358971,294599,262580,453696,980055,1121299,1210615,1162034,1622546,154812,355817,550558,288191,548398,666081,688755,660544,1506174,7704069,4587619,6723860,5783280,4279185,4257061,1707575,534589,2774301,2156369,306426,214147,890279,889063,888664,1655012,1079191,1578753,1655271,1013971,850785,1103499,1581275,1628109,2367979,1132514,3497679,613330,746994,1601834,745456,4221446,4300354,4253679,4463770,4402185],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(253,215,61,1)","line":{"color":"rgba(253,215,61,1)"}},"textfont":{"color":"rgba(253,215,61,1)"},"error_y":{"color":"rgba(253,215,61,1)"},"error_x":{"color":"rgba(253,215,61,1)"},"line":{"color":"rgba(253,215,61,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[151500,199900,434610,1819045,3178235,2469248,2615421,6262000,3371542,800261,4155729,9754536,5026109,1963498,1457990,3281513,6960478,10018940,11691472,5043864,7720297,3606649,7879879,9965026,5657029,5235059,7158970,4864803,4683668,3808562,7161517,5996710,7237948,12519734,12881603,13042353,6098139,5847618,8170626,7377727,5609951,7687382,10605760,14687197,18447300,28956756,31883303,12023304,15820523,13272904,13851173,15171223,24955187,23464043],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(237,202,125,1)","line":{"color":"rgba(237,202,125,1)"}},"textfont":{"color":"rgba(237,202,125,1)"},"error_y":{"color":"rgba(237,202,125,1)"},"error_x":{"color":"rgba(237,202,125,1)"},"line":{"color":"rgba(237,202,125,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[6852,20660,5454,15659,32575,20445,45438,51229,18633,6766,3433,29760,33880,22735,11000,29768,32542,3801,20620,25290,20185,19927,56241,71960,66656,650652,4645946,8006751,1167778,649076,182317,258760,338162,342441,10812784,11235999,6734396,15712428,6912522,6103962,5304609,6976850,8581152,10908568,10351454,6793238,4184572,5875720,3056269,2628197,2045496,2086405,2254080,1604659,1584657],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(212,190,160,1)","line":{"color":"rgba(212,190,160,1)"}},"textfont":{"color":"rgba(212,190,160,1)"},"error_y":{"color":"rgba(212,190,160,1)"},"error_x":{"color":"rgba(212,190,160,1)"},"line":{"color":"rgba(212,190,160,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1973,1974,1983,1984,1985,1986,1987,1988,1989,1990,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1920,2400,1860,11059,494,1409411,2524170,1314487,1158900,1098014,148700,32820,24850,221159,370168,530469,747227,399223,798363,638312,698927,326234,290930,356748,591174,1796864,2039931,2395849,2346572,6113779,4575627,5223466,5665983,8978499,3277808,3343364,3716160,4003757,4083832,4165509,4165509,4184917,4184917],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="astoria" class="level2">
<h2 class="anchored" data-anchor-id="astoria">Astoria</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>astoria_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"astoria"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>astoria_top_90 <span class="ot">&lt;-</span> astoria_products <span class="sc">%&gt;%</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>astoria_top_products <span class="ot">&lt;-</span> astoria_products <span class="sc">%&gt;%</span> </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> astoria_top_90)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(astoria_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Astoria Products in top 90% of Revenue"</span>,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-dfdf5e65e85afdda3a67" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-dfdf5e65e85afdda3a67">{"x":{"visdat":{"4bb023af64bd":["function () ","plotlyVisDat"]},"cur_data":"4bb023af64bd","attrs":{"4bb023af64bd":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Astoria Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1181696,1101959,943119,1498223,661119,692843,1086267,1972578,4773559,5865951,6063174,5407889,3832856,3808128,4410223,5369422,4320100,5630512,2807344,4677033,3951610,8694029,5310341,8862805,6999182,10459517,12827587,14738999,7464293,5327903,7597748,11936327,7396505,13938691,13711414,13985643,16507521,14963127,13154710,12861119,11575026,17882215,19270503,13939879,23979086,19880052,10949525,19202172,13319664,16722592,18419117,18656675,26173661,13357812,21530031],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[737631,703562,981419,886839,1086097,1066769,1731203,1597513,2921831,3097279,2861040,3471721,4208923,4167521,4629919,5009310,4915990,1677496,4907618,5588407,6750946,8870994,6635514,6004595,4148325,3482204,6502102,4001901,4457127,5280901,5475514,5407699,4684183,4741881,4836720,6452430,6755537,6301955,7771083,8236292,5878009,7184995,8064569,10550456,10264922,10005220,12529207,12147299,8357023,9998630,11025266,10313358,12726907,11896491],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(219,161,118,1)","line":{"color":"rgba(219,161,118,1)"}},"textfont":{"color":"rgba(219,161,118,1)"},"error_y":{"color":"rgba(219,161,118,1)"},"error_x":{"color":"rgba(219,161,118,1)"},"line":{"color":"rgba(219,161,118,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1978,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[191500,9053,570427,18470777,1678825,30896027,1665345,45371097,9440242,3216338,23474626,6520828,4611195,7054937,3390319,3458126,4060410,8971706,5429964,8182411,8828275,6616893,32663960,281521357,238031617,17003729,19468714,10260635,17456593,22981697,25646482,42159428,37894942,34717474,37908834],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(217,150,141,1)","line":{"color":"rgba(217,150,141,1)"}},"textfont":{"color":"rgba(217,150,141,1)"},"error_y":{"color":"rgba(217,150,141,1)"},"error_x":{"color":"rgba(217,150,141,1)"},"line":{"color":"rgba(217,150,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2013,2014,2015,2016,2017,2018,2019,2020],"y":[67801,76900,173175,164173,73464,132052,12470,14616,24088,87967,200879,126485,155805,176965,147694,229836,295613,1957765,12826589,3163046,3101249,131183,110326,285249,79538,30270,13800,69328,19956,13537,131323,56877,56877,58014,2,90,194,106,695,385,254,285,898573,968908,2742633,7169,7305,8447,8616],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(152,158,202,1)","line":{"color":"rgba(152,158,202,1)"}},"textfont":{"color":"rgba(152,158,202,1)"},"error_y":{"color":"rgba(152,158,202,1)"},"error_x":{"color":"rgba(152,158,202,1)"},"line":{"color":"rgba(152,158,202,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[269483,269644,281538,306103,327237,328313,898991,1076502,1630410,2690299,2471815,4129637,2345976,2428131,2798294,4259373,5762879,2708427,11515926,7384629,6556703,7205587,7500352,8007261,9664144,7751679,11534396,7893942,6744165,5648629,5304932,4575136,2934049,3185050,3248750,1432049,1826688,1337961,2655849,2296718,3001731,2564401,4096120,3596605,2981135,3271920,3200784,6048412,9905267,8627897,4194351,5906167,12808805,11388051],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(215,144,197,1)","line":{"color":"rgba(215,144,197,1)"}},"textfont":{"color":"rgba(215,144,197,1)"},"error_y":{"color":"rgba(215,144,197,1)"},"error_x":{"color":"rgba(215,144,197,1)"},"line":{"color":"rgba(215,144,197,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1972,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1027,2800,1820,3661,49855,20052,19653,115267,110076,204415,218244,293632,237489,322394,370755,459263,230985,1619600,798620,2779622,3810327,2346186,3215702,2827848,3300535,3446944,3103406,2830511,4261661,5580855,5357964,2909601,2688081,2741843,3387110,3972579,3091661,6358734,7297099,7125120,7715273,6973601,7134975,5201355,5893776,8576309,10387801,7503710,7826179,5598612,3499777,5529820,7425696],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(205,180,144,1)","line":{"color":"rgba(205,180,144,1)"}},"textfont":{"color":"rgba(205,180,144,1)"},"error_y":{"color":"rgba(205,180,144,1)"},"error_x":{"color":"rgba(205,180,144,1)"},"line":{"color":"rgba(205,180,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[5246977,6542676,11437329,3616657,6903864,13003606,2656692,4016230,3306876,2107209,3313422,2391518,4693414,2182405,113555,114921,215250,304883,459172,4462660,6620546,3516877,5258802,2953128,1318951,696796,625901,772935,940416,613194,1002228,2208890,2974015,3501278,3046095,3107017,3206336,2994050,3274808,4362210,4430711,6050413,8292485,6086014,9344087,10153499,7094034,5104941,4794124,2535317,1095320,1533824,3446255,6434897,5957794],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(186,217,78,1)","line":{"color":"rgba(186,217,78,1)"}},"textfont":{"color":"rgba(186,217,78,1)"},"error_y":{"color":"rgba(186,217,78,1)"},"error_x":{"color":"rgba(186,217,78,1)"},"line":{"color":"rgba(186,217,78,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[194929,138862,725044,1075000,1900000,1938000,1043482,784794,3274092,4813704,3105420,4354827,2063482,105728383,108295058,1046326,1302287,152504,76200,990],"mode":"lines+markers","type":"scatter","name":"SARDINE","marker":{"color":"rgba(247,217,52,1)","line":{"color":"rgba(247,217,52,1)"}},"textfont":{"color":"rgba(247,217,52,1)"},"error_y":{"color":"rgba(247,217,52,1)"},"error_x":{"color":"rgba(247,217,52,1)"},"line":{"color":"rgba(247,217,52,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[59544,1093819,741571,1506145,2343754,3576991,2844465,4504133,14182782,21447620,11683121,14832998,13508228,8204704,6585437,2315174,2333800,13790303,11254868,23433261,15981804,11755739,11340275,28519150,12271595,3941624,9966057,9927245,5067206,3350558,5194955,7091627,9461523,7444720,7614507,7766797,4915592,3349763,3416759,10562916,2868697,10318413,18193274,17873727,14659091,23356835,29922800,19143823,28601250,19378228,17559648,13477481,17047860,30843120,29002483],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(241,204,114,1)","line":{"color":"rgba(241,204,114,1)"}},"textfont":{"color":"rgba(241,204,114,1)"},"error_y":{"color":"rgba(241,204,114,1)"},"error_x":{"color":"rgba(241,204,114,1)"},"line":{"color":"rgba(241,204,114,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[19166757,22940030,20860177,33383713,34405467,48050434,23729602,34789058,27427201,21571218,23411964,37162,28768,55417,17626,61305,54821,84237,81297,54142,59779,26822,42762,1037621,23200,31981,691964,401577,2233925,681270,102061,66365,79655,82312,83958,85635,87349,138010,169626,193303,5842679,2519934,2238385,499413,416734,2054256,5325699,243088,168691,477001,481594,268208,667977,547307],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(215,191,158,1)","line":{"color":"rgba(215,191,158,1)"}},"textfont":{"color":"rgba(215,191,158,1)"},"error_y":{"color":"rgba(215,191,158,1)"},"error_x":{"color":"rgba(215,191,158,1)"},"line":{"color":"rgba(215,191,158,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1980,1981,1982,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[20378,1147068,845688,413418,3264,94649,21075,2000000,14271,197406,51472,256935,7500,3000000,6780000,6080000,6300563,7875000,83783,10004398,762000,652200,97200,930000,1302387,900000,500000,205000,800000,816000,1121000,1234070,2960000,3019200,1500850,2651000,2420248,1909776,1503136,1493394,7741043,9407951,10560671,14471619,12790921,11966172,8718952,5753892,12684995],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="newport" class="level2">
<h2 class="anchored" data-anchor-id="newport">Newport</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>newport_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"newport"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>newport_top_90 <span class="ot">&lt;-</span> newport_products <span class="sc">%&gt;%</span> </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>newport_top_products <span class="ot">&lt;-</span> newport_products <span class="sc">%&gt;%</span> </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> newport_top_90)</span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(newport_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Newport Products in top 90% of Revenue"</span>,</span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-837660bafebf5171bc00" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-837660bafebf5171bc00">{"x":{"visdat":{"4bb023691d5e":["function () ","plotlyVisDat"]},"cur_data":"4bb023691d5e","attrs":{"4bb023691d5e":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Newport Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1982,1983,1988,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[8223,12583,22770,71559,440059,54318,31263,279734,123441,232208,90000,156392,95514,151,673620,473735,142039,211862,427125,463012,414945,172237,52052,78500,49854,35200,17245,51191,52214,20741,24526,24815,28316,35067,17179,13526,15922,207379,55484,21713,32181,186174,189898,265257,270562,285358,275716,270958],"mode":"lines+markers","type":"scatter","name":"COD","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[242972,360175,716650,166714,390112,370916,696314,578873,1418483,4741501,3633981,1115230,1048208,2027062,3501976,2782700,1398020,1542804,1866072,2789233,2768300,3201600,3602860,2317196,3684187,4815920,5065143,8406097,4943294,4226024,3361039,5600209,7380723,3686103,4688013,4781772,8893417,11277361,9073367,8388058,5638664,10769908,12547018,4459273,11787246,9958032,4563115,8653385,18183224,23505177,27885315,28443021,22652084,22730751,24249561],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(228,156,113,1)","line":{"color":"rgba(228,156,113,1)"}},"textfont":{"color":"rgba(228,156,113,1)"},"error_y":{"color":"rgba(228,156,113,1)"},"error_x":{"color":"rgba(228,156,113,1)"},"line":{"color":"rgba(228,156,113,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[140235,150896,202781,299312,895872,261264,498753,3147897,1018844,1921752,418280,997500,2238829,1118138,219150,652554,1000204,1053154,1379300,2622900,3498960,2697788,965305,1554627,2123327,2362446,1195271,1097028,1314074,2449809,1909115,1180060,1570661,1395876,1423795,2992823,2782655,4131201,5228868,5778612,4711810,2390971,2991457,4074262,3215928,3883732,3407780,4351773,4438808,3718218,3792583,3952474,4111775,3794581],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(201,152,157,1)","line":{"color":"rgba(201,152,157,1)"}},"textfont":{"color":"rgba(201,152,157,1)"},"error_y":{"color":"rgba(201,152,157,1)"},"error_x":{"color":"rgba(201,152,157,1)"},"line":{"color":"rgba(201,152,157,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1131300,3734058,9151549,6095932,15302435,13676090,29440411,26038547,17097973,11275525,3813391,3580000,4917564,10975064,11194566,8433064,7335296,4960639,12246953,7875211,12981863,21214597,22921453,38016926,32886126,13550493,16392352,15045433,15869824,10672729,10886184,10611879,10611879,10611879],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(175,154,200,1)","line":{"color":"rgba(175,154,200,1)"}},"textfont":{"color":"rgba(175,154,200,1)"},"error_y":{"color":"rgba(175,154,200,1)"},"error_x":{"color":"rgba(175,154,200,1)"},"line":{"color":"rgba(175,154,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[45073,54541,77156,103822,52396,66397,215423,760553,1277723,2550308,1903750,1762500,4341451,4527255,1600150,2360835,734335,4295424,3240879,3077000,1930350,1119649,2492596,5661804,2526861,2255512,4827605,2171167,1816917,1773600,1573789,941190,1200970,1191978,1215818,717994,825554,1028229,1112885,1568076,1985784,829854,508946,1149688,1251535,2330168,1866881,2450101,3422332,3747692,3822645,5438374,4383095,6243210],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(226,148,184,1)","line":{"color":"rgba(226,148,184,1)"}},"textfont":{"color":"rgba(226,148,184,1)"},"error_y":{"color":"rgba(226,148,184,1)"},"error_x":{"color":"rgba(226,148,184,1)"},"line":{"color":"rgba(226,148,184,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1973,1974,1975,1976,1977,1978,1979,1980,1982,1983,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[4678,950,19831,13394,93674,65732,210000,94000,564931,64750,36203,36203,45950,222000,222000,2061446,1721802,1901866,1734219,2135070,2377849,2307592,1587102,2494006,2037350,2714260,2195000,2085548,3826631,3903164,5008341,5567395,6107234,8307103,8744068,10416448,7774525,6045259,3758603,2713948,5770201,5079187,5778908,5894486,4758757,4853933,4853933,4895747,4857670],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(176,208,99,1)","line":{"color":"rgba(176,208,99,1)"}},"textfont":{"color":"rgba(176,208,99,1)"},"error_y":{"color":"rgba(176,208,99,1)"},"error_x":{"color":"rgba(176,208,99,1)"},"line":{"color":"rgba(176,208,99,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2016],"y":[1952,9659,1885,46650,82918,7520,6700,152835,390200,13232,8510,8900,8900,89363,60376,136523,9200,185400,186321,597264,918115,1472341,538388,295589,1310249,1847026,1475812,1734539,1119250,119250,98000,2210,2254,2299,2345,2392,2440,2489,2539,329761,59717,474464,2833097,4363],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(227,217,62,1)","line":{"color":"rgba(227,217,62,1)"}},"textfont":{"color":"rgba(227,217,62,1)"},"error_y":{"color":"rgba(227,217,62,1)"},"error_x":{"color":"rgba(227,217,62,1)"},"line":{"color":"rgba(227,217,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1983,1984,1985],"y":[900000,900000,723200],"mode":"lines+markers","type":"scatter","name":"SCALLOPS","marker":{"color":"rgba(245,207,100,1)","line":{"color":"rgba(245,207,100,1)"}},"textfont":{"color":"rgba(245,207,100,1)"},"error_y":{"color":"rgba(245,207,100,1)"},"error_x":{"color":"rgba(245,207,100,1)"},"line":{"color":"rgba(245,207,100,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[147500,197072,719680,567574,608771,437952,651283,1737810,6218015,4282000,1800000,2668824,4174814,2914010,588000,956600,7930000,8480000,9749500,6320000,7800000,7941531,8593595,6782585,5304046,5168064,4308076,3644235,2150422,2740000,2320000,5257961,2439582,2619946,2672345,1735490,1172363,2517263,4132322,3176029,726750,10965164,10266305,10912429,15882857,24819632,15018564,9233175,9928477,2980669,3040283,4218678,3397578,3045263],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(219,192,155,1)","line":{"color":"rgba(219,192,155,1)"}},"textfont":{"color":"rgba(219,192,155,1)"},"error_y":{"color":"rgba(219,192,155,1)"},"error_x":{"color":"rgba(219,192,155,1)"},"line":{"color":"rgba(219,192,155,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1993,1997,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1195,10316,129756,322153,328596,760994,297273,434700,521369,497210,5606648,258826,330660,285870,201863,257996,296842,260366,265573,242597,247449,247449,247449,247449],"mode":"lines+markers","type":"scatter","name":"SKATES","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="coos-bay" class="level2">
<h2 class="anchored" data-anchor-id="coos-bay">Coos Bay</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>coos_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"coos_bay"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>coos_top_90 <span class="ot">&lt;-</span> coos_products <span class="sc">%&gt;%</span> </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>coos_top_products <span class="ot">&lt;-</span> coos_products <span class="sc">%&gt;%</span> </span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> coos_top_90)</span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(coos_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Coos Bay Products in top 90% of Revenue"</span>,</span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d7025934aa9cf4a2592c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d7025934aa9cf4a2592c">{"x":{"visdat":{"4bb02e221e68":["function () ","plotlyVisDat"]},"cur_data":"4bb02e221e68","attrs":{"4bb02e221e68":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Coos Bay Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[316824,850036,1069143,874059,1263233,1019144,321840,2545025,3417463,7162363,2026282,4129562,3710312,4038139,2832434,2806167,2551300,2637670,2599374,3414581,3266063,4910209,3313182,2759181,3314015,8232316,7989429,11815235,8907831,9177925,5870716,7410174,4636239,38869,41706,19199,29878,7589410,5243973,9240824,7927382,12169661,13099745,15346108,15499847,13441466,16275378,24200606,25607707,29347115,28670928,29244347,24214553,19686912,12877433],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[664107,231497,882882,499756,1071875,400165,1014035,884190,2694033,2648693,990341,1219817,1568316,2509020,1499180,1676800,1683200,3920950,2425784,1446996,4802207,5901218,3551217,1247328,250590,5025225,2843217,4037376,1161000,2746607,2428563,9552711,2270085,1923078,1961540,2000771,2040786,2081602,2123234,2165699,2209013,2253193,2298257,2344222,2344222,2344222,2344222],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(228,156,113,1)","line":{"color":"rgba(228,156,113,1)"}},"textfont":{"color":"rgba(228,156,113,1)"},"error_y":{"color":"rgba(228,156,113,1)"},"error_x":{"color":"rgba(228,156,113,1)"},"line":{"color":"rgba(228,156,113,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1978,1988,1989,1990,1991,1992,1993,1994,2006,2007,2008,2009,2010,2011],"y":[78640,12257,12257,10353,266920,47598,759,186582,4390026,1442016,1267353,2011460,179845,2425044],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(201,152,157,1)","line":{"color":"rgba(201,152,157,1)"}},"textfont":{"color":"rgba(201,152,157,1)"},"error_y":{"color":"rgba(201,152,157,1)"},"error_x":{"color":"rgba(201,152,157,1)"},"line":{"color":"rgba(201,152,157,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1973,1974,1976,1977,1978,1979,1980,1981,1982,1983,1984,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1998,1999,2000,2001,2002,2003,2004,2005],"y":[2000,3495,130,792,2462,8770,5818,8976,3686,1891,1891,10986654,13010,3745,327300,4202697,5137212,2725,2642206,3226116,585853,152716,12000,28402,27500,672,672,685,408],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(175,154,200,1)","line":{"color":"rgba(175,154,200,1)"}},"textfont":{"color":"rgba(175,154,200,1)"},"error_y":{"color":"rgba(175,154,200,1)"},"error_x":{"color":"rgba(175,154,200,1)"},"line":{"color":"rgba(175,154,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[5175,14810,18762,24844,28346,42992,24789,45694,55914,51840,102000,79000,47500,102000,132000,172000,133000,115000,126000,123000,150423,236423,137200,239856,249500,253380,299000,197300,190800,205907,290000,332415,274000,276000,288780,291836,292569,448580,278775,351359,354590,227829,173855,694789,223718,283967,279034,302658,259986,265186,7739297,7679337,142615,84800],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(226,148,184,1)","line":{"color":"rgba(226,148,184,1)"}},"textfont":{"color":"rgba(226,148,184,1)"},"error_y":{"color":"rgba(226,148,184,1)"},"error_x":{"color":"rgba(226,148,184,1)"},"line":{"color":"rgba(226,148,184,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001],"y":[122050,92240,219301,92605,149791,17159,145689,52941,765495,1320779,934861,1532625,1390880,1402192,1352200,1531200,1540800,1275,1358719,1067352,21600,1809117,1872753,3335506,1517034,1034802,7053529,3890405,4895781,671500,2022674,1012816],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(176,208,99,1)","line":{"color":"rgba(176,208,99,1)"}},"textfont":{"color":"rgba(176,208,99,1)"},"error_y":{"color":"rgba(176,208,99,1)"},"error_x":{"color":"rgba(176,208,99,1)"},"line":{"color":"rgba(176,208,99,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2000,6572,39135,36289,22002,31388,6453,149467,220071,147549,47296,107128,142857,142800,173300,173500,55410,54911,890456,2379602,1798178,1353626,1750000,766000,4424810,4880775,2877262,1570000,2847642,2189362,3851948,4886038,4316310,4402636,4490689,4580503,4672113,4765555,4860866,4958083,5057245,5158390,5261558,5261558,5261558,5261558],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(227,217,62,1)","line":{"color":"rgba(227,217,62,1)"}},"textfont":{"color":"rgba(227,217,62,1)"},"error_y":{"color":"rgba(227,217,62,1)"},"error_x":{"color":"rgba(227,217,62,1)"},"line":{"color":"rgba(227,217,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[33539,129402,29259,89195,54414,120376,46147,204101,93373,125152,277667,634285,565052,91660,79802,31349,50300,2712505,2559675,2843213,2848707,3538620,3148263,4356517,3660385,3503636,2834364,3351995,3624326,3094375,3178724,3719089,4228798,4658130,4661415,5454007,5118562,5926094,6041817,5982733,6575847,6950163,7833686,8028420,9186368,8850535,9366143,9553466,7029545,592545,592545],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(245,207,100,1)","line":{"color":"rgba(245,207,100,1)"}},"textfont":{"color":"rgba(245,207,100,1)"},"error_y":{"color":"rgba(245,207,100,1)"},"error_x":{"color":"rgba(245,207,100,1)"},"line":{"color":"rgba(245,207,100,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[622911,1220816,737178,1412084,2288202,1927240,788198,2401136,3728307,12525589,3447865,5685354,3968398,3136621,1768506,885500,3582912,4068363,8295195,12114474,9625825,5985678,9487382,12767907,11036938,7534194,6707566,4888435,5867742,2904011,3660325,4512214,7391948,2738657,3423323,4585142,4676844,3584592,4379295,21626054,9164760,12381949,15249584,16121556,16424099,17170680,16885971,13573789,15047814,15623628,11828465,12065035,11413038,11443218,10600680],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(219,192,155,1)","line":{"color":"rgba(219,192,155,1)"}},"textfont":{"color":"rgba(219,192,155,1)"},"error_y":{"color":"rgba(219,192,155,1)"},"error_x":{"color":"rgba(219,192,155,1)"},"line":{"color":"rgba(219,192,155,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1974,1977,1978,1980,1981,1982,1983,1990,1996,1997,1998,2011],"y":[1217,486143,100,64186,39191,143318,832500,1760,2000,2700,75868,1],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="brookings" class="level2">
<h2 class="anchored" data-anchor-id="brookings">Brookings</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>brookings_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"brookings"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>brookings_top_90 <span class="ot">&lt;-</span> brookings_products <span class="sc">%&gt;%</span> </span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>brookings_top_products <span class="ot">&lt;-</span> brookings_products <span class="sc">%&gt;%</span> </span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> brookings_top_90)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(brookings_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Brookings Products in top 90% of Revenue"</span>,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-41f80d81fc6e4283f039" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-41f80d81fc6e4283f039">{"x":{"visdat":{"4bb0603310ba":["function () ","plotlyVisDat"]},"cur_data":"4bb0603310ba","attrs":{"4bb0603310ba":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Brookings Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2021,2022],"y":[54450,96000,98273,74981,23744,573960,1117175,381316,648137,499117,591550,440569,1876234,1674274,1395584,298176,34000,40000,24900,62500,166750,46750,21000,67500,617870,33750,37125,40000,116825,52491,53540,54611,55703,56817,57953,59112,60294,61500,62730,914484,2705685],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1981,1982,1983,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2022],"y":[69769,66075,121041,175846,149080,165104,103814,103814,40552,651060,719414,310856,817940,553559,242566,234818,333726,1071619,991784,428883,428000,135793],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(228,156,113,1)","line":{"color":"rgba(228,156,113,1)"}},"textfont":{"color":"rgba(228,156,113,1)"},"error_y":{"color":"rgba(228,156,113,1)"},"error_x":{"color":"rgba(228,156,113,1)"},"line":{"color":"rgba(228,156,113,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1995,1996,1997,1998],"y":[2040000,2162280,209084,287918],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(201,152,157,1)","line":{"color":"rgba(201,152,157,1)"}},"textfont":{"color":"rgba(201,152,157,1)"},"error_y":{"color":"rgba(201,152,157,1)"},"error_x":{"color":"rgba(201,152,157,1)"},"line":{"color":"rgba(201,152,157,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1978,1979,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[84440,91841,163500,82700,139850,161718,175084,160380,156990,173786,219215,205438,194525,203062,196540,196540,196000,847130,618000,620900,490000,313698,435166,706818,754425,675462,688971,796607,914824,1415499,868776,564249,1013042,1236901,1177684,1013140,430071,722617,359320,623698,418300,342726,349580,482789,482789,482789],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(175,154,200,1)","line":{"color":"rgba(175,154,200,1)"}},"textfont":{"color":"rgba(175,154,200,1)"},"error_y":{"color":"rgba(175,154,200,1)"},"error_x":{"color":"rgba(175,154,200,1)"},"line":{"color":"rgba(175,154,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1977,1978,1979,1980,1981,1982,1983,1984,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2022],"y":[10680,15466,22634,20173,26744,24660,9911,9911,6196,6196,124457,124457,61423,600,615216,259373,285001,488336,619607,338824,110790,231847,1260396,581096,347521,181000,84482,24858,25355,25862,26379,26907,27445,27994,28554,29125,29708,28146],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(226,148,184,1)","line":{"color":"rgba(226,148,184,1)"}},"textfont":{"color":"rgba(226,148,184,1)"},"error_y":{"color":"rgba(226,148,184,1)"},"error_x":{"color":"rgba(226,148,184,1)"},"line":{"color":"rgba(226,148,184,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1973,1974,1975,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001],"y":[1760,130,4120,351518,281067,175273,146683,428268,110767,96757,736858,170456,167635,86946,86000],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(176,208,99,1)","line":{"color":"rgba(176,208,99,1)"}},"textfont":{"color":"rgba(176,208,99,1)"},"error_y":{"color":"rgba(176,208,99,1)"},"error_x":{"color":"rgba(176,208,99,1)"},"line":{"color":"rgba(176,208,99,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1974,1975,1976,1977,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012],"y":[34860,45800,19932,161300,33000,33000,12100,56255,111622,80480,51935,51935,60750,346500,239209,168075,184884,194140,238493,90019,91820,93656,95529,97440,99389,101377,103405,105473,107582],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(227,217,62,1)","line":{"color":"rgba(227,217,62,1)"}},"textfont":{"color":"rgba(227,217,62,1)"},"error_y":{"color":"rgba(227,217,62,1)"},"error_x":{"color":"rgba(227,217,62,1)"},"line":{"color":"rgba(227,217,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1986,1987,1989,1990,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2021,2022,2023],"y":[26400,198079,287716,461571,629254,476425,109152,502083,457127,236026,128255,57295,1520608,2364224,2545361,3243366,6583081,432143,424755,336240,131038,778792,71674,96483,12668,12000,4236030,3238484,7467471],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(245,207,100,1)","line":{"color":"rgba(245,207,100,1)"}},"textfont":{"color":"rgba(245,207,100,1)"},"error_y":{"color":"rgba(245,207,100,1)"},"error_x":{"color":"rgba(245,207,100,1)"},"line":{"color":"rgba(245,207,100,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1974,1975,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012],"y":[7950,4968,6200,41498,44793,53540,41400,41400,14950,465750,178685,87375,96113,103700,125620,156493,159623,162815,166071,169392,172780,176235,179759,183354,187021],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(219,192,155,1)","line":{"color":"rgba(219,192,155,1)"}},"textfont":{"color":"rgba(219,192,155,1)"},"error_y":{"color":"rgba(219,192,155,1)"},"error_x":{"color":"rgba(219,192,155,1)"},"line":{"color":"rgba(219,192,155,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1972,1973,1974,1975],"y":[13401,21754,16973,17892],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="crescent-city" class="level2">
<h2 class="anchored" data-anchor-id="crescent-city">Crescent City</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>crescent_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"crescent_city"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>crescent_top_90 <span class="ot">&lt;-</span> crescent_products <span class="sc">%&gt;%</span> </span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>crescent_top_products <span class="ot">&lt;-</span> crescent_products <span class="sc">%&gt;%</span> </span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> crescent_top_90)</span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(crescent_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Crescent City Products in top 90% of Revenue"</span>,</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-6f44b04f2864fd8e7baa" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-6f44b04f2864fd8e7baa">{"x":{"visdat":{"4bb0a3e2d32":["function () ","plotlyVisDat"]},"cur_data":"4bb0a3e2d32","attrs":{"4bb0a3e2d32":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Crescent City Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1972,1973,1974,1975,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001],"y":[235162,280080,441655,197472,153779,113082,181904,1048605,1142135,975000,361931,795000,303980,124032,261345,251781,472713,180635,3021375,2190326,1674722,4140344,4117633,3311537,2324767,2228333,1936523,2040025,1678000],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1978,1979,1980,1983,1994,1995,1996,1997,2000],"y":[68827,2438,22041,16777,93710,124325,14584,571272,571272,30000,667722,712545,770220,984497,582683],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001],"y":[99000,621480,687504,858338,1274997,1398749,1300721,1319685,2721800,1787484,1729287,1654500,3251600,931014,1206796,1854950,628168,626168,630000],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1978,1979,1980,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,2000],"y":[27204,713,7619,7369,31878,47374,32950,285854,285854,462000,474362,53646,442095,379256,736639,526765,483136,415510,406551,615500,1036737,1738842,1612664,1644716,256771],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1978,1980,1981,1982,1983,1984,1985,1991],"y":[74926,575,78226,288500,4000,4000,1000,800,35000],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1979,1980,1981,1982,1983,1984,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000],"y":[98195,258529,130120,354426,637099,367878,398453,1236763,1393163,300000,436067,135000,193494,485717,368273,25161,227065,56970,5710000,4833500,2133913,4782253,3652920,3209458,2949840,1132081,1371470,413495],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1973,1979,1982,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1806,42000,456284,194160,644666,177169,180713,184327,188014,191775,195611,195611,195611,195611],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(229,196,148,1)","line":{"color":"rgba(229,196,148,1)"}},"textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"line":{"color":"rgba(229,196,148,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="eureka" class="level2">
<h2 class="anchored" data-anchor-id="eureka">Eureka</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>eureka_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"eureka"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>eureka_top_90 <span class="ot">&lt;-</span> eureka_products <span class="sc">%&gt;%</span> </span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>eureka_top_products <span class="ot">&lt;-</span> eureka_products <span class="sc">%&gt;%</span> </span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> eureka_top_90)</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(eureka_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Eureka Products in top 90% of Revenue"</span>,</span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb17-28"><a href="#cb17-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b92c9f83f38704a456fe" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b92c9f83f38704a456fe">{"x":{"visdat":{"4bb05c9c29d0":["function () ","plotlyVisDat"]},"cur_data":"4bb05c9c29d0","attrs":{"4bb05c9c29d0":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Eureka Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1776826,1424488,1224363,721660,1747500,99675,1123060,3767210,4240271,3115661,6754107,6752834,4557600,5224400,2857730,2643171,2518000,2081000,2081000,2720000,2670000,5328702,5521190,5901802,5309175,2701702,1113875,4128320,2903359,2478232,5200187,5040214,2835058,3559159,2543449,6324860,4146126,3625040,1907218,1057977,505791,3576945,2653455,1029308,4407113,1493278,10493654,10703528,1129961,507520,517670,517670,8023455,8023455],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2398993,1506560,638813,1216046,4586122,4588946,3815829,7895044,6400230,6400230,7805400,7246836,5785733,7736089,8302950,7717575,10493618,7927724,2106500,9694355,8781434,5822444,6274032,3465555,3983398,4248831,3649315,2683177,3442758,3399371,1668693,2471293,2437943,2607948,3346799,2497819,3966008,4356766,3637714,891321,3216895,541102,4396536,3925098,3065611,3675039,3748541,1875767,4429683,4518278,4518278,4118693,4118693],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(228,156,113,1)","line":{"color":"rgba(228,156,113,1)"}},"textfont":{"color":"rgba(228,156,113,1)"},"error_y":{"color":"rgba(228,156,113,1)"},"error_x":{"color":"rgba(228,156,113,1)"},"line":{"color":"rgba(228,156,113,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1974,1975,1978,1979,1980,1981,1982,1983,1991,1992,1993,1994,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[850,580,296,4528,4528,4600,23879,20000,3461195,4625772,4787161,5846469,51050,58798,49571,27773,39852,63514,25897,65477,52300,57889,45637,41728,12050,40906,40083,37918,31472,4765,6044,1659,7153,7296,1699,1512,1542,1542],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(201,152,157,1)","line":{"color":"rgba(201,152,157,1)"}},"textfont":{"color":"rgba(201,152,157,1)"},"error_y":{"color":"rgba(201,152,157,1)"},"error_x":{"color":"rgba(201,152,157,1)"},"line":{"color":"rgba(201,152,157,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996],"y":[180372,291000,291213,435000,555000,494865,498483,703365,843000,898470,833928,733632,821184,718512,815160,902472,746364,849216,724683,1220564,1777233,2705346,3212286,2324478,2692154,2493014,2728349,1294676],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(175,154,200,1)","line":{"color":"rgba(175,154,200,1)"}},"textfont":{"color":"rgba(175,154,200,1)"},"error_y":{"color":"rgba(175,154,200,1)"},"error_x":{"color":"rgba(175,154,200,1)"},"line":{"color":"rgba(175,154,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[555667,64589,64589,288432,721330,712394,864368,2147375,2373696,2366874,1566800,3342070,4934636,5089709,5504646,5461010,5775914,6202173,1969068,11992547,7551892,4876610,3666515,1826607,5037505,5349179,4633282,3654469,2461422,2334067,1798163,2656017,1135173,899572,137368,68986,121409,80905,50943,36625,24255,17261,37727,37839,905384,108431,110599,228622,977262,996807,996807,1915675,1915675],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(226,148,184,1)","line":{"color":"rgba(226,148,184,1)"}},"textfont":{"color":"rgba(226,148,184,1)"},"error_y":{"color":"rgba(226,148,184,1)"},"error_x":{"color":"rgba(226,148,184,1)"},"line":{"color":"rgba(226,148,184,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3908,31740,18536,18529,38500,171302,197100,105387,131407,1367423,659067,659067,579100,1344341,490662,669332,913118,1190004,1929629,1476547,280000,4299288,4389067,2891225,1077044,668630,642569,3304360,2450711,1935074,2172636,1215634,1787957,1642810,2142795,1652265,2199204,2226644,2619552,2726919,2972516,4190379,4336570,289571,2295210,2749133,6185170,2024903,2065401,905127,1301486,1327516,1327516,1410094,1410094],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(176,208,99,1)","line":{"color":"rgba(176,208,99,1)"}},"textfont":{"color":"rgba(176,208,99,1)"},"error_y":{"color":"rgba(176,208,99,1)"},"error_x":{"color":"rgba(176,208,99,1)"},"line":{"color":"rgba(176,208,99,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[372283,767974,407791,378590,621483,938983,910570,1484757,335889,2276760,99792,3168,3200,472200,150000,29352,40000,635600,4000000,22000,30000,49250,58500,315000,91023,108440,215914,260000,183201,234404,264572,352000,425700,479582,788251,500998,489611,628101,622704,604311,643925,725673,803962,853389,838425,1198498,851178,828381,772613,742626,757478,753590,816009,697419],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(227,217,62,1)","line":{"color":"rgba(227,217,62,1)"}},"textfont":{"color":"rgba(227,217,62,1)"},"error_y":{"color":"rgba(227,217,62,1)"},"error_x":{"color":"rgba(227,217,62,1)"},"line":{"color":"rgba(227,217,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021],"y":[1180423,1121176,565322,376390,447195,255380,719155,1089348,1279146,8288657,2266584,2266584,666600,700000,1601093,3013152,1312199,1764352,2603082,1491065,301124,1010650,923504,1438275,2067141,880584,1122722,556780,26825,966335,2651177,3252668,2954902,5028505,5844613,4552753,5969060,10537022,9757401,9952549,6238062,1327130,1353673,1353673],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(245,207,100,1)","line":{"color":"rgba(245,207,100,1)"}},"textfont":{"color":"rgba(245,207,100,1)"},"error_y":{"color":"rgba(245,207,100,1)"},"error_x":{"color":"rgba(245,207,100,1)"},"line":{"color":"rgba(245,207,100,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1982,1983,1988,1989,1990,1991,1992,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[53747,77909,12750,13518,62501,102702,114675,102545,63760,25045,678,1723656,1066000,25000,33000,32000,33200,96000,45157,53707,60349,61000,61447,62039,64673,85000,102000,105328,877769,441180,464057,341799,158237,122662,176178,222367,186087,262010,276472,396853,290268,286698,309557,303753,309829,334007,334007,257500],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(219,192,155,1)","line":{"color":"rgba(219,192,155,1)"}},"textfont":{"color":"rgba(219,192,155,1)"},"error_y":{"color":"rgba(219,192,155,1)"},"error_x":{"color":"rgba(219,192,155,1)"},"line":{"color":"rgba(219,192,155,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,2016,2017],"y":[290237,248491,314524,292600,325918,355363,332839,240600,444869,557826,1132858,534400,750000,900000,377543,501900,681600,730714,1538000,656505,77285,62582,1354148,173466,117762,108273,169764,20625,21038],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="fort-bragg" class="level2">
<h2 class="anchored" data-anchor-id="fort-bragg">Fort Bragg</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>bragg_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"fort_bragg"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>bragg_top_90 <span class="ot">&lt;-</span> bragg_products <span class="sc">%&gt;%</span> </span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>bragg_top_products <span class="ot">&lt;-</span> bragg_products <span class="sc">%&gt;%</span> </span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> bragg_top_90)</span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(bragg_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Fort Bragg Products in top 90% of Revenue"</span>,</span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-5e2269dfe723400c2ddf" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-5e2269dfe723400c2ddf">{"x":{"visdat":{"4bb0230da31":["function () ","plotlyVisDat"]},"cur_data":"4bb0230da31","attrs":{"4bb0230da31":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Fort Bragg Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1977,1978,1979,1980,1981,1982,1983,1984,1985,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2021,2022,2023],"y":[380000,21000,54680,427937,428000,75563,107565,20238,7500,1038442,1038442,210078,215777,595989,778519,1415248,1013381,1637902,2628280,2341821,2013608,37212,140790,1019025,1019025],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000],"y":[569639,475890,580299,801606,801600,2950407,1059782,932029,933500,513500,505500,1734720,1734720,979742,1020606,1124747,980750,1341113,1276006,1202850,1321997,1480988,1406836,287113],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[39660,3717054,6551949,6614101,10954013,8479364,6431086,8147165,7731937,4107906,4547905,4570848,4010945,3977945,3897425,5227723,2340900,1167047,1381309,1134015,1156695,1179829,7000000,5500000,1645791,4360272,9492227,4878641,2016164,1397568,1343266,851655,94522,96412,1033052,1033052,1292074],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000],"y":[72852,109505,392921,220712,220700,1846139,1924604,1463542,1439000,519000,519000,916620,916620,1125523,1125523,807393,843378,1233736,2208237,1350062,1743414,2258622,2221334,197054],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000],"y":[88800,148145,77489,77400,153325,463960,269609,326000,161000,161000,258318,259339,326693,326777,573936,437755,941066,1567691,1102963,1345033,828704,932523,26704],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1983,1984,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[217636,563878,169540,188040,210240,372450,407456,13200,714840,3744,407485,212000,145239,1610707,1625458,13620,17371,62326,64236,108310,32389,66329,52668,46000,45100,30000,36572,48652,25847,34699,48074,58759,76523,80668,83930,48000,66924,68262,52690,120560,142453,145302,190500,201500,205530,209641,209641,209641,42887],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1978,1979,1980,1981,1982,1988,1989,1996],"y":[1425496,110800,268750,268800,48000,4047,4047,7250],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(229,196,148,1)","line":{"color":"rgba(229,196,148,1)"}},"textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"line":{"color":"rgba(229,196,148,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="bodega-bay" class="level2">
<h2 class="anchored" data-anchor-id="bodega-bay">Bodega Bay</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>bodega_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"bodega_bay"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>bodega_top_90 <span class="ot">&lt;-</span> bodega_products <span class="sc">%&gt;%</span> </span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>bodega_top_products <span class="ot">&lt;-</span> bodega_products <span class="sc">%&gt;%</span> </span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> bodega_top_90)</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(bodega_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Bodega Bay Products in top 90% of Revenue"</span>,</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-e1f667d11a9eb0ff06bf" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e1f667d11a9eb0ff06bf">{"x":{"visdat":{"4bb03f4f274a":["function () ","plotlyVisDat"]},"cur_data":"4bb03f4f274a","attrs":{"4bb03f4f274a":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Bodega Bay Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1988,1989,1990,1991,1992,1993,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[15000,5045,103500,91770,75000,82500,138709,73033,1486594,1299829,251834,2083203,2138460,2181229,2753424,2762862,2818119,1801333,2015922,2056240,2097365,2139312,2182098,2225740],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1982,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[225678,640146,479921,984155,818727,858860,982171,601265,613290,1152417,707759,721914,559375,540542,551353,562380,573628,585100,596802],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999],"y":[1007229,824590,4774585,5486219,4564750,12396525,12621726,8282209,9511957,11781653,570120,713499],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004],"y":[160321,158436,156351,102125,68794,208973,296027,263669,332308,443556,589598,418072,885000,680000,855000,936299,1100000,1004000,1100000,1200000,1400000,1484521,1200000,1200000,1868131,1207275,1241684,1635790,1400306,680275,221910,221910,345562,459200,471340,480767],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1982],"y":[814680],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1989,1990,1991,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018],"y":[2500,2132,3200,9500,112997,1284929,2598971,2506082,2946414,3141314,2057920,2063743,7486109,8535597,8706309,8270166,9953849,10152927,10355985,15877694,9718043,9891694,50113,51115,52137],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[1447923,379320,606596,682159,881357,1839196,1481070,1510691,2648008,2157246,2200391,3561897,4310551,4396762,4484697,4574391,4665879,4759196],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(229,196,148,1)","line":{"color":"rgba(229,196,148,1)"}},"textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"line":{"color":"rgba(229,196,148,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="san-francisco" class="level2">
<h2 class="anchored" data-anchor-id="san-francisco">San Francisco</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>sf_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"san_francisco"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>sf_top_90 <span class="ot">&lt;-</span> sf_products <span class="sc">%&gt;%</span> </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>sf_top_products <span class="ot">&lt;-</span> sf_products <span class="sc">%&gt;%</span> </span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> sf_top_90)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(sf_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"San Francisco Products in top 90% of Revenue"</span>,</span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-3db927e417b24d5ddbce" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-3db927e417b24d5ddbce">{"x":{"visdat":{"4bb02c9b7071":["function () ","plotlyVisDat"]},"cur_data":"4bb02c9b7071","attrs":{"4bb02c9b7071":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"San Francisco Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1970,1971,1972,1973,1989,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"y":[86548,18093,18093,19000,14429,90000,76000,366756,537600,810000,953825,748350,378231,640000,400022,294364,333096,145096,342486,550976,488820,476939,486477,508668,673871,687348,756076,703777,672182,685626,20971],"mode":"lines+markers","type":"scatter","name":"BASS","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[169000,295650,158500,175200,234385,77669,98287,452796,1759394,892163,130861,111360,112000,169000,150000,160000,160000,167541,328117,268083,227023,352241,659017,244268,479160,879180,622471,643906,1727486,908987,267268,303518,393781,197925,169557,218391,860019,878323,898944,795632,295744,803650,912212,480339,4248135,5509098,5619280,5229092,5281080,5386702,4779642,4875235,4875235,4875235,3420535],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(185,175,135,1)","line":{"color":"rgba(185,175,135,1)"}},"textfont":{"color":"rgba(185,175,135,1)"},"error_y":{"color":"rgba(185,175,135,1)"},"error_x":{"color":"rgba(185,175,135,1)"},"line":{"color":"rgba(185,175,135,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1984,1985,1986,1987],"y":[6000,150000,168000,170000],"mode":"lines+markers","type":"scatter","name":"CRAWFISH","marker":{"color":"rgba(239,150,106,1)","line":{"color":"rgba(239,150,106,1)"}},"textfont":{"color":"rgba(239,150,106,1)"},"error_y":{"color":"rgba(239,150,106,1)"},"error_x":{"color":"rgba(239,150,106,1)"},"line":{"color":"rgba(239,150,106,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[5364,81797,1195250,475521,350497,562600,578200,873000,1199800,1609631,1018496,1086551,1161476,1117065,506525,587688,624778,694444,700845,714861,504176,643712,656586,627089,594011,442223,451068,87948,19738,20133,20536,20947,20947,20947,7000],"mode":"lines+markers","type":"scatter","name":"DORADO","marker":{"color":"rgba(225,148,131,1)","line":{"color":"rgba(225,148,131,1)"}},"textfont":{"color":"rgba(225,148,131,1)"},"error_y":{"color":"rgba(225,148,131,1)"},"error_x":{"color":"rgba(225,148,131,1)"},"line":{"color":"rgba(225,148,131,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[54991,224104,234663,878089,819189,1740260,1625736,2176301,584994,492500,533500,225000,290000,309271,308000,205100,195000,334745,411252,1361909,887280,1046223,1318274,880404,642975,702020,842432,454980,837400,523887,780026,760095,855446,1079375,942801,871441,869821,703590,693063,415507,733620,993113,1038540,503369,835888,652003,675271,620507,719328,733715,749307,684291,869605],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(178,156,177,1)","line":{"color":"rgba(178,156,177,1)"}},"textfont":{"color":"rgba(178,156,177,1)"},"error_y":{"color":"rgba(178,156,177,1)"},"error_x":{"color":"rgba(178,156,177,1)"},"line":{"color":"rgba(178,156,177,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[15803,1854,4300,109140,216479,264594,293632,819117,737246,1205660,1777480,1811674,2252624,2537262,2270407,3490966,4193999,3052581,3097430,2957018,2733967,2940415,2785754,2863036,2763983,2460593,2602893,2391703,3114791,1680780,2597633,1982809,2099808,1402160,1486005,2227513,2139857],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(161,157,201,1)","line":{"color":"rgba(161,157,201,1)"}},"textfont":{"color":"rgba(161,157,201,1)"},"error_y":{"color":"rgba(161,157,201,1)"},"error_x":{"color":"rgba(161,157,201,1)"},"line":{"color":"rgba(161,157,201,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1988,1989,1990],"y":[16234,8305,322,6820,7912,7912,1400000,1393305,1428122],"mode":"lines+markers","type":"scatter","name":"HERRING","marker":{"color":"rgba(201,148,198,1)","line":{"color":"rgba(201,148,198,1)"}},"textfont":{"color":"rgba(201,148,198,1)"},"error_y":{"color":"rgba(201,148,198,1)"},"error_x":{"color":"rgba(201,148,198,1)"},"line":{"color":"rgba(201,148,198,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[72589,38576,38120,88494,369767,470394,258435,188509,176116,8498,500000,500000,500000,500000,125000,861680,1659753,2492532,4365884,2344494,3292597,2802875,2098515,1106671,888794,818419,473437,1126390,376331,100081,593750,541780,468060,371000,338700,455274,403640,382000,358740,289051,317681,17063,253654,79381,80680,102962,105021,99324,121869,121869,1374869],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(228,144,189,1)","line":{"color":"rgba(228,144,189,1)"}},"textfont":{"color":"rgba(228,144,189,1)"},"error_y":{"color":"rgba(228,144,189,1)"},"error_x":{"color":"rgba(228,144,189,1)"},"line":{"color":"rgba(228,144,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1403,54089,12795,91456,124219,222374,164036,690152,691859,236001,318250,252250,252300,287500,727250,645000,690000,270250,10270,355249,1038804,1343952,1026213,2198336,2223391,1561715,2236740,1434811,1051133,1515618,832219,856793,791188,730780,864968,670011,681021,675857,731461,207902,237825,243075,264180,482550,711329,712143,632909,725327,802459,907775,771133,886207,781509,1048384],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(205,180,144,1)","line":{"color":"rgba(205,180,144,1)"}},"textfont":{"color":"rgba(205,180,144,1)"},"error_y":{"color":"rgba(205,180,144,1)"},"error_x":{"color":"rgba(205,180,144,1)"},"line":{"color":"rgba(205,180,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1995,1996,1997,1998,1999,2000,2001,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[147920,135335,38799,77535,82207,168578,212208,205520,191020,157104,215000,161250,115975,72000,82000,85000,100000,29325,5000,204221,214744,171089,205142,284380,48000,170245,342471,193605,9944,32382,32382,33000,2345,116603,129755,213393,165963,1170910,1194327,1199527,568205,568205,369248,369248],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(172,212,93,1)","line":{"color":"rgba(172,212,93,1)"}},"textfont":{"color":"rgba(172,212,93,1)"},"error_y":{"color":"rgba(172,212,93,1)"},"error_x":{"color":"rgba(172,212,93,1)"},"line":{"color":"rgba(172,212,93,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[260219,233013,393377,579500,998962,608470,682915,487013,1748884,1753654,223690,1000000,403400,350000,170000,120000,129500,365208,395000,546333,1133606,1343966,1077658,908811,1521117,3335437,4322626,2475855,5525948,4388055,6001470,6666697,6013203,4481142,3527918,3531448,3395270,3534476,3629285,3655756,3147232,4238927,3334874,4229282,5127824,7572026,8796191,9803088,11157031,12858078,14030421,11529905,11797683,13138440,13110542],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(202,217,72,1)","line":{"color":"rgba(202,217,72,1)"}},"textfont":{"color":"rgba(202,217,72,1)"},"error_y":{"color":"rgba(202,217,72,1)"},"error_x":{"color":"rgba(202,217,72,1)"},"line":{"color":"rgba(202,217,72,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[187000,224250,55000,110000,1685530,114394,147445,212500,517624,1163091,197464,85646,337816,370088,146870,54859,1299789,694676,1327558,2927066,2916779,2848498,3606250,1652806,1727143,2793634,2216850,3245488,1432531,592305,1217651,1234210,1281548,1302830,1322341,1325973,154668,191264,378071,201325,205352,805484,821594,744693,997868,997868,9546868],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(240,217,56,1)","line":{"color":"rgba(240,217,56,1)"}},"textfont":{"color":"rgba(240,217,56,1)"},"error_y":{"color":"rgba(240,217,56,1)"},"error_x":{"color":"rgba(240,217,56,1)"},"line":{"color":"rgba(240,217,56,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1978,1979,1980,1981,1982,1988,1989,1990,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[507316,427176,580374,709999,92000,707166,562529,316325,336736,669902,83000,319125,62610,32725,8169,17124,79200,83808,247220,319372,325759,507645,517798,463693,266640,266640,266640],"mode":"lines+markers","type":"scatter","name":"SQUID","marker":{"color":"rgba(250,212,80,1)","line":{"color":"rgba(250,212,80,1)"}},"textfont":{"color":"rgba(250,212,80,1)"},"error_y":{"color":"rgba(250,212,80,1)"},"error_x":{"color":"rgba(250,212,80,1)"},"line":{"color":"rgba(250,212,80,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1982,1983,1989,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[60200,62200,1500000,510000,34046,35750,288500,284500,822571,348996,781489,651702,389897,730942,722540,106921,147822,150373,124120,148509,142947,100328,107576,109728,168642,407840,304287,204098,124424,126912,132712,135366,138074,138074,138074,138074],"mode":"lines+markers","type":"scatter","name":"STURGEON","marker":{"color":"rgba(239,202,122,1)","line":{"color":"rgba(239,202,122,1)"}},"textfont":{"color":"rgba(239,202,122,1)"},"error_y":{"color":"rgba(239,202,122,1)"},"error_x":{"color":"rgba(239,202,122,1)"},"line":{"color":"rgba(239,202,122,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[61924,30766,152983,1749000,2352461,578537,1961306,1485993,1769500,4170450,6666201,4485153,4428283,4022306,3195473,1784256,1743499,1800805,1429535,1449538,1477289,894479,1810086,1152002,1196522,2429957,2247280,2367322,1959485,1158082,1146298,1385721,680660,673133,451075,527557],"mode":"lines+markers","type":"scatter","name":"SWORDFISH","marker":{"color":"rgba(223,194,152,1)","line":{"color":"rgba(223,194,152,1)"}},"textfont":{"color":"rgba(223,194,152,1)"},"error_y":{"color":"rgba(223,194,152,1)"},"error_x":{"color":"rgba(223,194,152,1)"},"line":{"color":"rgba(223,194,152,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[6597952,10208979,11372196,15672119,12608812,16333130,11963978,14861877,27489890,33141385,1327647,102809533,119690073,55415712,26652856,23048775,68300,45989,35000,2191701,2064392,3167864,4826352,8074223,5323733,7041795,4564652,8644558,14012886,16935756,14249107,12032685,15320920,11659117,11321428,8595405,10158080,4893254,4654174,4992090,4832844,6639392,7664144,8362047,12674328,13908113,14423244,12602901,11517574,10500507,10757476,8421242,7258070,7468966,6475152],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(202,186,166,1)","line":{"color":"rgba(202,186,166,1)"}},"textfont":{"color":"rgba(202,186,166,1)"},"error_y":{"color":"rgba(202,186,166,1)"},"error_x":{"color":"rgba(202,186,166,1)"},"line":{"color":"rgba(202,186,166,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1978,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[70475,59853,58217,95348,86660,120419,341673,124329,793080,504730,273773,434260,621500,552623,1109200,1117361,2403361,188717,1571620,2062837,2075991,2526161,2505675,2786800,4661603,2489784,1540311,521253,498274,410274,403000,113220,523438,472116,663524,858958,1008904,748150,19236368,30874722,32290287,29997759,30500199,31023978,31644458,32277347,26752707,26752707,7673207],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="monterey" class="level2">
<h2 class="anchored" data-anchor-id="monterey">Monterey</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>monterey_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"monterey"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>monterey_top_90 <span class="ot">&lt;-</span> monterey_products <span class="sc">%&gt;%</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>monterey_top_products <span class="ot">&lt;-</span> monterey_products <span class="sc">%&gt;%</span> </span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> monterey_top_90)</span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(monterey_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Monterey Products in top 90% of Revenue"</span>,</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-b5960946e2b7b4028c4e" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-b5960946e2b7b4028c4e">{"x":{"visdat":{"4bb06f3c1c0e":["function () ","plotlyVisDat"]},"cur_data":"4bb06f3c1c0e","attrs":{"4bb06f3c1c0e":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Monterey Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1993,1994,1995,1996,1997,1998,1999,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[8640,807177,5135760,3302106,3244150,4665307,6348290,3860792,5462877,1912877,9800000,226549,2892937,621505,555203,1124247,852500,446327,290000,640712,411628,470186,352668,358312,415240,423545,423545,423545,423545],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2032,122999,1445,85489,185269,393509,501500,636000,621000,289231,648607,1565566,1460201,813051,286662,128274,920322,583939,562545,822422,316770,590491,1424622,1609136,1511862,1352182,1622065,1175261,396336,337021,70200,71604,73036,96997,76437,84507,90857,92674,92674,80638,80638],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(193,171,131,1)","line":{"color":"rgba(193,171,131,1)"}},"textfont":{"color":"rgba(193,171,131,1)"},"error_y":{"color":"rgba(193,171,131,1)"},"error_x":{"color":"rgba(193,171,131,1)"},"line":{"color":"rgba(193,171,131,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1990,2006],"y":[2000000,1275180],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1981,1982,1983,1984,1985,1988,1989,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[35025,15000,26000,14100,14000,46653,46703,436800,445536,454447,511536,485607,519763,893358,911225,911225,659362,659362],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(207,151,151,1)","line":{"color":"rgba(207,151,151,1)"}},"textfont":{"color":"rgba(207,151,151,1)"},"error_y":{"color":"rgba(207,151,151,1)"},"error_x":{"color":"rgba(207,151,151,1)"},"line":{"color":"rgba(207,151,151,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992],"y":[16519,66842,43165,33459,86010,215138,430616,2285706,2512273,6535705,4027138,1489383,3193416,3760812,969279,2285465,1837559,3284197,1426567,1315155,1234250,1022406,879986],"mode":"lines+markers","type":"scatter","name":"HERRING","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1995],"y":[16500,836,215,175344,20240,56642,176254,461726,235734,314261,451612,263900,219000,1465700,2840000,907400,844920,502035,162000,185000,4300800,84700],"mode":"lines+markers","type":"scatter","name":"JACK","marker":{"color":"rgba(190,151,199,1)","line":{"color":"rgba(190,151,199,1)"}},"textfont":{"color":"rgba(190,151,199,1)"},"error_y":{"color":"rgba(190,151,199,1)"},"error_x":{"color":"rgba(190,151,199,1)"},"line":{"color":"rgba(190,151,199,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1996,1997,1998,2000,2001,2002,2003,2004,2005,2006,2007,2008,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3697,23866,19341,40914,49304,89196,80986,294661,691796,33254,522951,536575,626600,389400,85680,149000,65660,44000,28136,189646,178159,2002,322768,250000,442165,376513,25386,195782,798534,8202139,116600,260341,1159504,1821661,1955327,1994434,90309,117871,9450,17966740,36374138,69438522,14383814,982425,3562999,2729714,2784308,1881359,47787,47787],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[72000,77696,80959,127350,156800,150000,587231,89289,406912,1124223,1088450,1860000,1663800,1613000,304354,557710,1310874,2693230,952327,743870,1105985,932046,1441783,961679,1411373,776924,631392,249116,1298107,586155,644541,358057,179561,75912,90007,37440,38189,38953,99732,41877,45538,57015,58155,58155,43008,43008],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(205,180,144,1)","line":{"color":"rgba(205,180,144,1)"}},"textfont":{"color":"rgba(205,180,144,1)"},"error_y":{"color":"rgba(205,180,144,1)"},"error_x":{"color":"rgba(205,180,144,1)"},"line":{"color":"rgba(205,180,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2013],"y":[27000,33480,47300,22450,25000,48750,3194,14259,61071,110249,83104,87734,96000,90000,110000,319,4702,341064,336579,213510,160731,454308,1137082,1291635,801821,2692189,2083179,918707,1744101,2027168,1330070,120000],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1975,1976,1977,1978,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,2000,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[55396,25179,99917,112163,19574,135692,1045225,489548,177718,387540,1626483,50760,1373837,1388561,2096914,756411,111414,1021397,652894,279797,463515,593668,65575,94041,82710,480,480,490,500,130510,133120,135782,241957,163396,192530,262751,268006,268006,149329,149329],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(213,217,68,1)","line":{"color":"rgba(213,217,68,1)"}},"textfont":{"color":"rgba(213,217,68,1)"},"error_y":{"color":"rgba(213,217,68,1)"},"error_x":{"color":"rgba(213,217,68,1)"},"line":{"color":"rgba(213,217,68,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[128000,226944,160250,540306,1453900,1204400,1851628,1792081,5082922,2167688,2071247,12707711,2682266,4546444,2910676,7653311,14103926,14386005,10425052,3088354,3957937,3085589,4248966,2631963,675039,24284,56525,15457,15766,16081,16081,16081,16081],"mode":"lines+markers","type":"scatter","name":"SARDINE","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1994,1995,1996,1997,1998,1999,2000,2005,2006,2007,2015],"y":[1532094,603932,141772,941320,4795048,4725996,1674662,1801355,3601355,5000000,895248,963037,1253985,571368,937950,7162124,56862,144,4500,4590,334801],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(244,206,105,1)","line":{"color":"rgba(244,206,105,1)"}},"textfont":{"color":"rgba(244,206,105,1)"},"error_y":{"color":"rgba(244,206,105,1)"},"error_x":{"color":"rgba(244,206,105,1)"},"line":{"color":"rgba(244,206,105,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[258441,393277,707106,570756,145923,1728647,1483647,1351808,1551624,3680350,6686210,4714732,7630946,5941320,257713,164725,2147934,3508923,3023828,4054710,4252932,4063021,9107468,2663031,3758500,3296854,2892000,2137347,2972058,658326,6848210,8461257,7457724,15096115,26782503,33648944,16300662,11580147,17280898,17626516,29218397,37537778,41312841,17883020,39984082,32249175,47039792,53243701,86833943,67315789,14974649,15274142,38669269,25346776,8401491],"mode":"lines+markers","type":"scatter","name":"SQUID","marker":{"color":"rgba(229,196,148,1)","line":{"color":"rgba(229,196,148,1)"}},"textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"line":{"color":"rgba(229,196,148,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1986,1988,1989,1993,1994],"y":[4172,2923656,585956,39340,5418],"mode":"lines+markers","type":"scatter","name":"SWORDFISH","marker":{"color":"rgba(205,187,164,1)","line":{"color":"rgba(205,187,164,1)"}},"textfont":{"color":"rgba(205,187,164,1)"},"error_y":{"color":"rgba(205,187,164,1)"},"error_x":{"color":"rgba(205,187,164,1)"},"line":{"color":"rgba(205,187,164,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1972,1973,1974,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[7860,7700,2189,17155,84850,1296438,1378601,407232,483846,387000,1752173,2619819,1809571,5725847,6511318,3229699,202192,280852,1531845,288945,285901,418300,564521,631819,666252,516853,1090981,565360,634498,527903,162812,247611,197392,147228,87237,554637,1283671,1382377,230828,563334,93376,1,1140176,2423761,1897565,1688958,1509162,1535115,1715102,1749404,1749404,1749404,1749404],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="morro-bay" class="level2">
<h2 class="anchored" data-anchor-id="morro-bay">Morro Bay</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>mb_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"morro_bay"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>mb_top_90 <span class="ot">&lt;-</span> mb_products <span class="sc">%&gt;%</span> </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>mb_top_products <span class="ot">&lt;-</span> mb_products <span class="sc">%&gt;%</span> </span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> mb_top_90)</span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(mb_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Morro Bay Products in top 90% of Revenue"</span>,</span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-d21770fefab022c724b8" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-d21770fefab022c724b8">{"x":{"visdat":{"4bb03ac34890":["function () ","plotlyVisDat"]},"cur_data":"4bb03ac34890","attrs":{"4bb03ac34890":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Morro Bay Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012],"y":[22241,23000,76771,69308,86257,96246,103512,105582,200579,204590,208682,212856,155693,151573],"mode":"lines+markers","type":"scatter","name":"BASS","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1989,1990,1991,1994,2003,2004,2005,2006],"y":[7655,8200,8100,9600,25000,96538,104458,108321,110487],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(211,164,122,1)","line":{"color":"rgba(211,164,122,1)"}},"textfont":{"color":"rgba(211,164,122,1)"},"error_y":{"color":"rgba(211,164,122,1)"},"error_x":{"color":"rgba(211,164,122,1)"},"line":{"color":"rgba(211,164,122,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1999,2000,2001,2003,2004,2007,2008,2009,2010,2011,2012],"y":[19380,20000,120907,86647,96141,175751,179266,182851,186508,140126,102910],"mode":"lines+markers","type":"scatter","name":"DORADO","marker":{"color":"rgba(229,147,127,1)","line":{"color":"rgba(229,147,127,1)"}},"textfont":{"color":"rgba(229,147,127,1)"},"error_y":{"color":"rgba(229,147,127,1)"},"error_x":{"color":"rgba(229,147,127,1)"},"line":{"color":"rgba(229,147,127,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[22358,89023,169417,338507,184708,113096,92196,152815,55878,48000,89500,89346,51500,9500,9500,401303,398150,465083,467623,769543,559777,542411,868093,947450,1309964,63505,62219,62600,2413,1994,92829,125431,102510,104560,186669,190401,194209,198093,122380,101075,265903,271221,276645,5226,103018,105079,107180,109324,109324,109324],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(156,159,194,1)","line":{"color":"rgba(156,159,194,1)"}},"textfont":{"color":"rgba(156,159,194,1)"},"error_y":{"color":"rgba(156,159,194,1)"},"error_x":{"color":"rgba(156,159,194,1)"},"line":{"color":"rgba(156,159,194,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1972,1988,1989,1990,1991,1992,1993,1994,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[7206,1300,5513,5500,1360,6392,1172,272,256327,268900,818209,1005455,818748,838818,629507,642097,860990,878210,895774,913690,502264,708064,19694,20088,20490],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(194,150,199,1)","line":{"color":"rgba(194,150,199,1)"}},"textfont":{"color":"rgba(194,150,199,1)"},"error_y":{"color":"rgba(194,150,199,1)"},"error_x":{"color":"rgba(194,150,199,1)"},"line":{"color":"rgba(194,150,199,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1977,1978,1979,1980,1981,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"y":[240642,206804,210176,221955,305500,311500,313000,36938,218,970,340,350,16875,14000,14217,20310,99169,74759,223927,351400,256000,160000,42159,42000,84812,31278,163156,181695,177465,181015,292183,298025,303984,310065,39172,24792,11224,11448,11677,323],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(223,155,177,1)","line":{"color":"rgba(223,155,177,1)"}},"textfont":{"color":"rgba(223,155,177,1)"},"error_y":{"color":"rgba(223,155,177,1)"},"error_x":{"color":"rgba(223,155,177,1)"},"line":{"color":"rgba(223,155,177,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022],"y":[128258,479403,552270,632152,514000,362080,221189,231528,271509,352800,135000,213422,133900,135000,135000,570277,592400,1433928,1433916,1477663,864147,464520,1438167,1254835,548214,471428,261727,23000,205883,393856,51465,52494,53544,97464,17786,18142,18505,18875,18875,18875],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(182,204,108,1)","line":{"color":"rgba(182,204,108,1)"}},"textfont":{"color":"rgba(182,204,108,1)"},"error_y":{"color":"rgba(182,204,108,1)"},"error_x":{"color":"rgba(182,204,108,1)"},"line":{"color":"rgba(182,204,108,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1978,1979,1980,1981,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"y":[1666,67843,104577,1850,40486,38975,246425,266368,345895,169912,143648,365455,264000,165706,31565,32196,32839,33496,3956342,36193,293205,299069,305050,1221974],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(209,217,69,1)","line":{"color":"rgba(209,217,69,1)"}},"textfont":{"color":"rgba(209,217,69,1)"},"error_y":{"color":"rgba(209,217,69,1)"},"error_x":{"color":"rgba(209,217,69,1)"},"line":{"color":"rgba(209,217,69,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1989,1990,1991,1992,1993,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"y":[358890,405000,149306,113473,880367,171600,340976,340600,627935,778942,1531251,528269,318448,324817,1426475,1455003,1484104,1513785,2536779,1580684,1027791,1048346,1069313,22542],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(253,215,61,1)","line":{"color":"rgba(253,215,61,1)"}},"textfont":{"color":"rgba(253,215,61,1)"},"error_y":{"color":"rgba(253,215,61,1)"},"error_x":{"color":"rgba(253,215,61,1)"},"line":{"color":"rgba(253,215,61,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1989,1990,1991,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"y":[103688,100000,176609,198066,123223,123000,222251,168872,166267,124922,106785,108921,126203,128727,131302,133928,191361,179270,117448,119797,122193,36360],"mode":"lines+markers","type":"scatter","name":"SWORDFISH","marker":{"color":"rgba(237,202,125,1)","line":{"color":"rgba(237,202,125,1)"}},"textfont":{"color":"rgba(237,202,125,1)"},"error_y":{"color":"rgba(237,202,125,1)"},"error_x":{"color":"rgba(237,202,125,1)"},"line":{"color":"rgba(237,202,125,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1988,1989,1990,1991,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],"y":[16214,15190,2746,2777,132836,133000,259471,255528,455797,369554,356157,363280,656583,669714,683107,696770,354775,263074,4263,4348,4435,4326],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(212,190,160,1)","line":{"color":"rgba(212,190,160,1)"}},"textfont":{"color":"rgba(212,190,160,1)"},"error_y":{"color":"rgba(212,190,160,1)"},"error_x":{"color":"rgba(212,190,160,1)"},"line":{"color":"rgba(212,190,160,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1972,1973,1974,1975,1978,1988,1989,1992,1995,1996,1997,1998,1999,2000,2001,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015],"y":[2770,15204,9069,25363,2468,45256,49000,380995,4320,7926,12623,22511,91172,70000,62055,425457,310530,272380,277828,380020,387620,395372,403279,461254,172522,53653,54726,55821],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="santa-barbara" class="level2">
<h2 class="anchored" data-anchor-id="santa-barbara">Santa Barbara</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>sb_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"santa_barbara"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>sb_top_90 <span class="ot">&lt;-</span> sb_products <span class="sc">%&gt;%</span> </span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a>sb_top_products <span class="ot">&lt;-</span> sb_products <span class="sc">%&gt;%</span> </span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> sb_top_90)</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(sb_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Santa Barbara Products in top 90% of Revenue"</span>,</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-42a4e01634cd199ca880" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-42a4e01634cd199ca880">{"x":{"visdat":{"4bb01e7d7e78":["function () ","plotlyVisDat"]},"cur_data":"4bb01e7d7e78","attrs":{"4bb01e7d7e78":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Santa Barbara Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1980,1981,1988,1989],"y":[528000,99675,105750,60000,213915,5720,40091,89056,107611,400000,400000,24774,75000],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[227500,202251,316355,14315,230000,136500,261050,266271,276410,354833,361930,328000,334560,341251,945000,51700,34516,34516,34516,1165673],"mode":"lines+markers","type":"scatter","name":"GROUPER","marker":{"color":"rgba(204,167,126,1)","line":{"color":"rgba(204,167,126,1)"}},"textfont":{"color":"rgba(204,167,126,1)"},"error_y":{"color":"rgba(204,167,126,1)"},"error_x":{"color":"rgba(204,167,126,1)"},"line":{"color":"rgba(204,167,126,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1982,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[6446,7915,7863,14296,3020,9730,18317,213855,107705,102810,6000,75200,46243,167143,240936,460731,248120,832000,1075100,1068032,1333000,1306900,1409400,1374800,1178800,1227050,1346399,1273600,773690,1080931,2033869,1191160,851710,1119718,1573780,1277349,581455,423104,664422,693772,629305,641891,379623,337519,251570,251570,248392,813538],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(238,145,116,1)","line":{"color":"rgba(238,145,116,1)"}},"textfont":{"color":"rgba(238,145,116,1)"},"error_y":{"color":"rgba(238,145,116,1)"},"error_x":{"color":"rgba(238,145,116,1)"},"line":{"color":"rgba(238,145,116,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986],"y":[199373,516244,218144,80759,3164,112810,539371,1575626,1885776,1394482,2076073,3451635,1990357,1442908,3499,413164,11322],"mode":"lines+markers","type":"scatter","name":"JACK","marker":{"color":"rgba(178,156,177,1)","line":{"color":"rgba(178,156,177,1)"}},"textfont":{"color":"rgba(178,156,177,1)"},"error_y":{"color":"rgba(178,156,177,1)"},"error_x":{"color":"rgba(178,156,177,1)"},"line":{"color":"rgba(178,156,177,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[582898,830918,873818,984443,7087591,7123202,2710330,3867046,6370884,7561388,7128238,26177149,11475367,2891838,1450338,374772,1110516,618932,1025881,1117161,2111178,4846320,8092728,6828053,8651958,8771144,8597156,6955122,5625666,3907550,4794998,2674853,3514346,4784098,11746088,6170669,6240873,5155869,6455816,6671031,5365734,5369931,5262614,5366309,3120104,3190577,3254389,3308030,3374191,3444873,3513616,3583888,3583888,3583734,3583734],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(175,154,200,1)","line":{"color":"rgba(175,154,200,1)"}},"textfont":{"color":"rgba(175,154,200,1)"},"error_y":{"color":"rgba(175,154,200,1)"},"error_x":{"color":"rgba(175,154,200,1)"},"line":{"color":"rgba(175,154,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1977,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005],"y":[245658,259500,176250,147000,182629,1003,430000,258329,154295,243876,570106,389804,241686,203520,125742,135000,117000,200000,36000,30000,4000,29250,52750,19968,16960,18408,20280,20650,24862],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(224,140,196,1)","line":{"color":"rgba(224,140,196,1)"}},"textfont":{"color":"rgba(224,140,196,1)"},"error_y":{"color":"rgba(224,140,196,1)"},"error_x":{"color":"rgba(224,140,196,1)"},"line":{"color":"rgba(224,140,196,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1982,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[6546,7942,8499,26551,16005,22000,24790,7240,99700,2000,30000,225195,257400,409812,851500,1157500,871754,843250,954550,1024850,1466000,1266000,1266000,1383250,1040000,458000,876617,1542989,1389240,1496398,1399007,1592075,1366718,1236143,1757012,1827025,1640567,1673378,1706846,1569460,295828,1264140,1264140,1262193,2649143],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(205,180,144,1)","line":{"color":"rgba(205,180,144,1)"}},"textfont":{"color":"rgba(205,180,144,1)"},"error_y":{"color":"rgba(205,180,144,1)"},"error_x":{"color":"rgba(205,180,144,1)"},"line":{"color":"rgba(205,180,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[138600,141350,136000,15300,140780,192037,254626,247537,318780,390000,294560,613950,297599,227760,150920,153938,65415,66723,139260,142045,142045,142045,142045],"mode":"lines+markers","type":"scatter","name":"SEA CUCUMBER","marker":{"color":"rgba(174,216,81,1)","line":{"color":"rgba(174,216,81,1)"}},"textfont":{"color":"rgba(174,216,81,1)"},"error_y":{"color":"rgba(174,216,81,1)"},"error_x":{"color":"rgba(174,216,81,1)"},"line":{"color":"rgba(174,216,81,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1976,1980,1981,1982,1985,1986,1987,1988,1989,1990,1998,1999,2000,2001,2002,2003,2004],"y":[107,314000,320000,292700,181179,444740,804590,92895,102448,200000,2789,96164,518356,500000,4725,2400,2448],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(227,217,62,1)","line":{"color":"rgba(227,217,62,1)"}},"textfont":{"color":"rgba(227,217,62,1)"},"error_y":{"color":"rgba(227,217,62,1)"},"error_x":{"color":"rgba(227,217,62,1)"},"line":{"color":"rgba(227,217,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005],"y":[561498,724783,640363,382154,246390,828347,413114,728648,1407126,521397,64244,408630,944684,717306,2910,1350,336060,124050,2002586,4116758,1107960,30452,80395,200395,1576469,298446,1485375,2657647,2819099,468636,35802,2478000,2176000,6669,7000,7140,11200],"mode":"lines+markers","type":"scatter","name":"SQUID","marker":{"color":"rgba(250,212,80,1)","line":{"color":"rgba(250,212,80,1)"}},"textfont":{"color":"rgba(250,212,80,1)"},"error_y":{"color":"rgba(250,212,80,1)"},"error_x":{"color":"rgba(250,212,80,1)"},"line":{"color":"rgba(250,212,80,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1980,1981,1982,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[10956,50989,3042,6363,761,4000,38850,140000,300000,62100,240000,249088,685000,718000,775900,740400,859960,815960,481000,366000,366000,400000,478000,290780,193713,869951,340700,375189,402598,414075,315121,357684,172515,225894,219240,223625,228097,98705,143222,116494,116494,115622,597087],"mode":"lines+markers","type":"scatter","name":"SWORDFISH","marker":{"color":"rgba(234,199,134,1)","line":{"color":"rgba(234,199,134,1)"}},"textfont":{"color":"rgba(234,199,134,1)"},"error_y":{"color":"rgba(234,199,134,1)"},"error_x":{"color":"rgba(234,199,134,1)"},"line":{"color":"rgba(234,199,134,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017],"y":[5311,11967,5300,52423,22676,18900,16665,339590,334000,447514,449300,543920,665320,595000,430000,430000,473000,880000,288800,729378,1679558,787500,701250,1086500,989125,1008908,1681619,1447280,1476226,19600,5000,5100],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(209,189,161,1)","line":{"color":"rgba(209,189,161,1)"}},"textfont":{"color":"rgba(209,189,161,1)"},"error_y":{"color":"rgba(209,189,161,1)"},"error_x":{"color":"rgba(209,189,161,1)"},"line":{"color":"rgba(209,189,161,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1972,1975,1978,1979,1980,1982,1983,1994,1995,1996,1997,1998,1999,2014,2015],"y":[175610,332,105,786,231164,1982,67300,1210000,100000,19200,364000,404000,455000,556600,140000,1858,1895],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="los-angeles" class="level2">
<h2 class="anchored" data-anchor-id="los-angeles">Los Angeles</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>la_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"los_angeles"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>la_top_90 <span class="ot">&lt;-</span> la_products <span class="sc">%&gt;%</span> </span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>la_top_products <span class="ot">&lt;-</span> la_products <span class="sc">%&gt;%</span> </span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> la_top_90)</span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(la_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Los Angeles Products in top 90% of Revenue"</span>,</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-5f23ffaa663ce66a0cf1" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-5f23ffaa663ce66a0cf1">{"x":{"visdat":{"4bb07b3b2a9a":["function () ","plotlyVisDat"]},"cur_data":"4bb07b3b2a9a","attrs":{"4bb07b3b2a9a":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Los Angeles Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[74309,46542,198411,1334516,3152909,1180578,689434,926393,4015730,4568570,4656980,345000,7135499,7456316,8145324,7904912,8443740,6605803,7792302,11933081,8840907,10689697,11257463,9932708,11494374,8705697,6990595,7478381,7134059,8591967,12854024,12990718,12913387,15817295,18091863,1201867,652818,658164,1968900,853869,1110139,1007419,555560,760050,2963151,3015621,3084973,3146673,3209606,3251215,3316239,3316239,3316239,3316239],"mode":"lines+markers","type":"scatter","name":"COD","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1976,1977,1979,1980,1981,1982,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[508381,513419,49631,80000,208980,5510000,10445000,10701900,9000000,4200,945650,1694909,54843,240392,354313,2117281,5684980,1426435,6531206,4371564,8963818,1890294,3493876,2791171,2344066,1620343,897182,241560,241368,11135201,24542147,8350167,8508450,8080171,2074945,6792694,5463959,5573239,5330968,5437587,5546339,5657266,5770411,5770411,5770411,5770411],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(193,171,131,1)","line":{"color":"rgba(193,171,131,1)"}},"textfont":{"color":"rgba(193,171,131,1)"},"error_y":{"color":"rgba(193,171,131,1)"},"error_x":{"color":"rgba(193,171,131,1)"},"line":{"color":"rgba(193,171,131,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1976,1977,1980,1981,1982,1983,1984,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[9100,613,76908,7200,16025,30700,4200,278760,192936,1203632,3532718,1905094,2607571,2893011,1053803,1378068,2244128,4829465,3614232,2270343,1431446,1903684,2477181,339990,455122,1074248,1763228,5288154,5022135,4117585,15893435,6650185,5857183,3514712,3302038,1807479,1843629,1880502,1770457,1805866,1805866,1805866,1703009],"mode":"lines+markers","type":"scatter","name":"DORADO","marker":{"color":"rgba(252,141,98,1)","line":{"color":"rgba(252,141,98,1)"}},"textfont":{"color":"rgba(252,141,98,1)"},"error_y":{"color":"rgba(252,141,98,1)"},"error_x":{"color":"rgba(252,141,98,1)"},"line":{"color":"rgba(252,141,98,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[593666,1361987,2347929,7082932,6011939,2237638,1962450,1434864,1824778,1178626,1052411,2661892,2745945,5735105,6623372,5343915,7142594,3932000,610496,7623087,13199923,16084825,13761525,17652200,20214421,23594672,17739835,21287399,17362358,20719988,18568083,21801572,24971693,25952565,27811357,17915613,10611490,9330120,10634696,9345807,7231150,10885780,4805423,4212696,3565209,3703442,3150440,3213449,3277718,3343271,2685642,2777579,2660875,2660875,2486041],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(207,151,151,1)","line":{"color":"rgba(207,151,151,1)"}},"textfont":{"color":"rgba(207,151,151,1)"},"error_y":{"color":"rgba(207,151,151,1)"},"error_x":{"color":"rgba(207,151,151,1)"},"line":{"color":"rgba(207,151,151,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[5067743,6092881,6115863,20682894,1138870,1703833,2559781,1403060,13930672,9382793,8460351,10654636,10687845,27658821,28450655,22534878,8306408,6911285,24827339,8852455,6846898,6206784,1620389,1357439,1332119,301682,241837,237428,435621,684554,119780,58080,47487,149337,2589772,2660736,2826768,2879835,2973671,3820246,60327,44186,37422,497584,3219455,623834,704543,537476,548226,24960,20670,21084,18427,18427,17927],"mode":"lines+markers","type":"scatter","name":"JACK","marker":{"color":"rgba(141,160,203,1)","line":{"color":"rgba(141,160,203,1)"}},"textfont":{"color":"rgba(141,160,203,1)"},"error_y":{"color":"rgba(141,160,203,1)"},"error_x":{"color":"rgba(141,160,203,1)"},"line":{"color":"rgba(141,160,203,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[93827,2410488,1076816,1866405,8821081,4186682,7160886,5681202,6955269,1794503,4401404,3926613,4564307,4310214,3463350,951233,1169929,956592,428186,11689879,15707752,21183295,40629910,30236938,23143900,25202267,23889980,29654306,21539226,34114086,17746178,12548903,13387838,11159706,10538681,12325869,10448812,5716600,8192669,10788811,6977177,6454804,7237176,9409568,12765460,12211821,14874829,10480297,10665902,10568520,9280627,9046531,9719559,9690433,9220784],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(190,151,199,1)","line":{"color":"rgba(190,151,199,1)"}},"textfont":{"color":"rgba(190,151,199,1)"},"error_y":{"color":"rgba(190,151,199,1)"},"error_x":{"color":"rgba(190,151,199,1)"},"line":{"color":"rgba(190,151,199,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1978,1979,1980,1981,1982,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[189217,858219,243400,244992,177714,618268,586497,57995522,21363147,22227182,26169588,26475791,23334000,16523650,18425907,18686591,20132066,3466337,2935459,5669794,7548587,7140626,10097466,9432146,9646157,4547300,6084035,7484420,4662059,2665570,10539082,10334065,3662318,2436757,2897146,5278522,5081402,4888930,5068056,5249009,6256395,6563301,7688857,7688857,7104548],"mode":"lines+markers","type":"scatter","name":"POLLOCK","marker":{"color":"rgba(231,138,195,1)","line":{"color":"rgba(231,138,195,1)"}},"textfont":{"color":"rgba(231,138,195,1)"},"error_y":{"color":"rgba(231,138,195,1)"},"error_x":{"color":"rgba(231,138,195,1)"},"line":{"color":"rgba(231,138,195,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[113438,298963,80264,232350,104000,84500,145331,55769,1792323,2093945,2223843,715450,2579670,2320450,1800140,1924076,2075984,2524413,3979052,13594997,2548698,3782240,2308136,2299217,3736097,5339664,3145062,5207725,4677625,5626603,1775782,1252809,1906583,1349886,1514533,228840,35000,35700,720802,1496900,1174311,678925,1266324,284635,41008,41828,42665,43518,44388,45276,46182,47106,47106,47106,47106],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(205,180,144,1)","line":{"color":"rgba(205,180,144,1)"}},"textfont":{"color":"rgba(205,180,144,1)"},"error_y":{"color":"rgba(205,180,144,1)"},"error_x":{"color":"rgba(205,180,144,1)"},"line":{"color":"rgba(205,180,144,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1734098,2567351,3021688,5101275,4140989,4287653,7179739,7938278,8691503,10121090,4147927,4857492,5585767,7771190,8252708,16799522,19112584,15059233,13369587,26329478,25464204,18892431,26717852,27464415,33032823,46453244,36010414,49300439,35010809,60328381,53054181,50257227,49341627,49995181,34094794,37027317,48221907,52330971,72841663,76986595,70606775,36661975,47477710,39204220,74237938,77921681,81998620,82431454,84629685,85199390,81883049,81608214,84903205,87754756,85878274],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(166,216,84,1)","line":{"color":"rgba(166,216,84,1)"}},"textfont":{"color":"rgba(166,216,84,1)"},"error_y":{"color":"rgba(166,216,84,1)"},"error_x":{"color":"rgba(166,216,84,1)"},"line":{"color":"rgba(166,216,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012],"y":[1521234,1613664,1808639,1874256,2310837,1870134,2494526,3696950,4826473,6078898,7044502,6383695,7169013,7647600,6359092,6153269,5768000,6694024,6836091,6063012,7267245,5026564,5151017,5559219,6226042,6590452,5998456,7431251,6428803,6850569,3919757,3848988,5209104,7916693,9267127,3704960,5448581,5522367,396418,878159,533771,12653925,871899,236646],"mode":"lines+markers","type":"scatter","name":"SCALLOPS","marker":{"color":"rgba(213,217,68,1)","line":{"color":"rgba(213,217,68,1)"}},"textfont":{"color":"rgba(213,217,68,1)"},"error_y":{"color":"rgba(213,217,68,1)"},"error_x":{"color":"rgba(213,217,68,1)"},"line":{"color":"rgba(213,217,68,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2540793,16731145,15710173,18201554,20474272,22683054,30193952,39495020,51508176,73850158,64818647,55021689,59019449,60715546,60756392,62013722,64383251,37037909,59545129,109896749,100867009,119656025,176226419,156392033,187712996,202137213,174817665,186605557,222052923,254070718,218758369,297204774,282463308,255345714,233812214,178578884,249488271,328822336,312800707,250426380,124138664,123703219,136509331,74458497,81192488,79164048,93716980,73279323,73586597,75010363,76079706,77601301,77601301,77601301,77601301],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(255,217,47,1)","line":{"color":"rgba(255,217,47,1)"}},"textfont":{"color":"rgba(255,217,47,1)"},"error_y":{"color":"rgba(255,217,47,1)"},"error_x":{"color":"rgba(255,217,47,1)"},"line":{"color":"rgba(255,217,47,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[192165,184529,183733,8251,369587,737874,508637,902330,1456009,687589,279131,517821,3330800,35000,1112,1680,2745,2423215,2992200,5718137,3893829,2801049,2966526,20685326,18420883,31807484,24397693,12532186,1954804,20707142,38075060,39641444,35308193,5983209,19830236,6846451,22486970,3601897,19438603,15172810,14464638,12326571,11205927,953753,6699543,6833534,191998,195838,199754,203749,207824,207824,207824,207824],"mode":"lines+markers","type":"scatter","name":"SQUID","marker":{"color":"rgba(244,206,105,1)","line":{"color":"rgba(244,206,105,1)"}},"textfont":{"color":"rgba(244,206,105,1)"},"error_y":{"color":"rgba(244,206,105,1)"},"error_x":{"color":"rgba(244,206,105,1)"},"line":{"color":"rgba(244,206,105,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1979,1980,1981,1982,1983,1984,1985,1986,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[156745,581275,8133,1051,1516,1900,103233,285000,333679,130231,315480,1677600,1527922,1645863,5000,2268014,4728992,7002836,13551887,9992652,11860233,17497939,18378350,17575253,17370726,15257896,9869100,5996770,6021697,6281492,4707332,2687552,2595495,2385871,2517329,4025464,3080089,2998001,2807682,4332647,8499331,5709445,5744117,5859000,5976180,6095704,5299293,5426384,5426384,5426384,5375703],"mode":"lines+markers","type":"scatter","name":"SWORDFISH","marker":{"color":"rgba(229,196,148,1)","line":{"color":"rgba(229,196,148,1)"}},"textfont":{"color":"rgba(229,196,148,1)"},"error_y":{"color":"rgba(229,196,148,1)"},"error_x":{"color":"rgba(229,196,148,1)"},"line":{"color":"rgba(229,196,148,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[121685730,158673440,167007793,242458693,310523767,367536298,306342586,390208620,299488797,360760042,304612447,337959453,297568910,266225918,242034946,170354031,56371600,53669762,59563061,79929934,67334128,153586293,177546550,117166631,161667621,174880969,150908733,179799936,167948924,185383132,207046841,147014984,151502163,140913148,154038643,149824684,182099981,205858682,201328561,222887493,215018601,214050080,200929538,323705837,304830520,255303168,265570196,256019176,276844462,315690627,340911522,351035365,315848507,315662766,310863137],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(205,187,164,1)","line":{"color":"rgba(205,187,164,1)"}},"textfont":{"color":"rgba(205,187,164,1)"},"error_y":{"color":"rgba(205,187,164,1)"},"error_x":{"color":"rgba(205,187,164,1)"},"line":{"color":"rgba(205,187,164,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[11650852,23281496,17766450,32107835,46241857,29747806,33170380,50769266,51702057,81176758,72429100,51033737,65647521,49194002,80164653,18026583,15257185,10748929,33210025,43387116,97579348,61829129,93210155,118819972,168141986,159093680,166537664,149431501,82867090,184667244,189897498,157481098,160670761,42844067,63326281,19451000,19914673,73471024,84950102,91639046,93099946,90248331,92485255,83575757,91977170,10777854,77850311,77955584,79573844,81461043,82530043,84048979,84050401,84227557,84171544],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="san-diego" class="level2">
<h2 class="anchored" data-anchor-id="san-diego">San Diego</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>sd_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"san_diego"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a>sd_top_90 <span class="ot">&lt;-</span> sd_products <span class="sc">%&gt;%</span> </span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>sd_top_products <span class="ot">&lt;-</span> sd_products <span class="sc">%&gt;%</span> </span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> sd_top_90)</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(sd_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"San Diego Products in top 90% of Revenue"</span>,</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-e59d2d31fb543de09c37" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-e59d2d31fb543de09c37">{"x":{"visdat":{"4bb0368813dc":["function () ","plotlyVisDat"]},"cur_data":"4bb0368813dc","attrs":{"4bb0368813dc":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"San Diego Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1985,1988,1989,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[36800,24000,18000,20000,53064,102178,58789,121591,45401,50131,17300,16836,14500,10,403709,333000,29102,14579,164365,92368,92368,92673,178040,316241,91600,71152,94288,97356,407503,425265,386993,369917,377315,384861,653000,655000,578000,589560,601351,575000,638000,540000,550800,550800,550800,550800],"mode":"lines+markers","type":"scatter","name":"BASS","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2023],"y":[1046495,538953,2850,23200,90064,416345,416345,983550,699480,330785,467115,559720,660657,568543,382619,279433,98440,123455,125924,128442,125000],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(189,173,133,1)","line":{"color":"rgba(189,173,133,1)"}},"textfont":{"color":"rgba(189,173,133,1)"},"error_y":{"color":"rgba(189,173,133,1)"},"error_x":{"color":"rgba(189,173,133,1)"},"line":{"color":"rgba(189,173,133,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1978,1980,1981,1983,1989,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[18,16,394,154,43,5625,64288,326487,430623,458663,400983,240690,219906,292651,224779,183306,171764,119070,302912,323845,273100,224895,253568,214751,220488,223115,207000,2300,310000,451000,460020,469220,197000,474000,335000,341700,341700,341700,341700],"mode":"lines+markers","type":"scatter","name":"DORADO","marker":{"color":"rgba(245,146,102,1)","line":{"color":"rgba(245,146,102,1)"}},"textfont":{"color":"rgba(245,146,102,1)"},"error_y":{"color":"rgba(245,146,102,1)"},"error_x":{"color":"rgba(245,146,102,1)"},"line":{"color":"rgba(245,146,102,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1974,1975,1976,1977,1978,1979,1980,1984,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2974,1988,9668,14367,9400,6580,12288,9684,9500,250,22825,608000,794767,964121,590454,394670,1210007,1506699,1656199,1268785,1054414,1542311,1240525,1337596,1252915,846804,2802632,1153370,704096,690912,787853,768897,631122,788584,996951,809441,805000,940000,958800,977976,755000,750000,762000,777240,777240,777240,777240],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(217,150,141,1)","line":{"color":"rgba(217,150,141,1)"}},"textfont":{"color":"rgba(217,150,141,1)"},"error_y":{"color":"rgba(217,150,141,1)"},"error_x":{"color":"rgba(217,150,141,1)"},"line":{"color":"rgba(217,150,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2018,2019,2020,2021,2022,2023],"y":[9298,11602,3214,1000,2000,1500,18381,19898,14185,3236,64307,1878,1284,1795,446,191,377,1423,250000,125638,139605,46081,16670,118496,104637,98657,67929,48098,74508,61813,34000,41642,51016,195125,183864,104691,122763,120940,104594,25456,37291,111259,185000,175000,254000,259080,264262,370000,359000,366180,366180,366180,366180],"mode":"lines+markers","type":"scatter","name":"JACK","marker":{"color":"rgba(162,158,189,1)","line":{"color":"rgba(162,158,189,1)"}},"textfont":{"color":"rgba(162,158,189,1)"},"error_y":{"color":"rgba(162,158,189,1)"},"error_x":{"color":"rgba(162,158,189,1)"},"line":{"color":"rgba(162,158,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1976,1977,1979,1980,1981,1982,1983,1984,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2018,2019,2020,2021,2022,2023],"y":[10500,11900,14400,20000,7500,6300,93250,13273,228300,250000,300000,160000,200000,302500,957306,833570,307489,56853,387555,295693,295693,298918,130000,295693,302055,290000,290000,290000,301000,307020,97000,164000,167280,167280,167280,167280],"mode":"lines+markers","type":"scatter","name":"LOBSTER","marker":{"color":"rgba(175,154,200,1)","line":{"color":"rgba(175,154,200,1)"}},"textfont":{"color":"rgba(175,154,200,1)"},"error_y":{"color":"rgba(175,154,200,1)"},"error_x":{"color":"rgba(175,154,200,1)"},"line":{"color":"rgba(175,154,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1858,13687490,15268196,16828538,16494074,21498983,26264632,4000558,3439322,2668459,46270,2822753,2686524,2614279,3119903,2216906,2166830,2743731,2439487,5083323,7684722,3869880,8742372,7085943,13263458,17266946,34972886,36097683,64037710,49254684,34638869,29145196,30063242,3447369,4407788,5189816,3952792,3758116,4384816,4916428,3973794,3454067,3397123,3461037,3987605,3872161,2995025,2078621,1584568,1605960,1806212,1842336,15282615,2234268,2234268],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(215,144,197,1)","line":{"color":"rgba(215,144,197,1)"}},"textfont":{"color":"rgba(215,144,197,1)"},"error_y":{"color":"rgba(215,144,197,1)"},"error_x":{"color":"rgba(215,144,197,1)"},"line":{"color":"rgba(215,144,197,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1974,1975,1976,1977,1978,1980,1981,1983,1984,1985,1986,1987,1989,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3192,5760,13106,7980,29003,3476,4134,873,336,400,500,410,1050,18115,300000,2435339,171000,1105546,1249611,1335723,1425468,1591198,1885634,1628801,2109404,2196802,1604930,3597045,3111427,3615339,4553181,4696817,4711939,1177321,1585326,1505790,1643000,1720000,1547000,1577940,1609499,2333000,2235000,1665000,1698300,1698300,1698300,1764300],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(219,162,168,1)","line":{"color":"rgba(219,162,168,1)"}},"textfont":{"color":"rgba(219,162,168,1)"},"error_y":{"color":"rgba(219,162,168,1)"},"error_x":{"color":"rgba(219,162,168,1)"},"line":{"color":"rgba(219,162,168,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1989,1990,1991,1992,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[163800,287140,1050565,296044,233803,98799,71316,24059,6745,31891,29160,782042,709970,209753,220592,225004,229505,293000,298860,304837,283000,270000,225000,229500,229500,229500,229500],"mode":"lines+markers","type":"scatter","name":"SCALLOPS","marker":{"color":"rgba(189,198,118,1)","line":{"color":"rgba(189,198,118,1)"}},"textfont":{"color":"rgba(189,198,118,1)"},"error_y":{"color":"rgba(189,198,118,1)"},"error_x":{"color":"rgba(189,198,118,1)"},"line":{"color":"rgba(189,198,118,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[992190,1098411,212329,593861,492107,294903,294903,304231,94000,49863,49450,246100,698000,698268,1270850,866194,324511,685070,698771,712746,541000,551820,562856,565000,543000,511000,521220,521220,521220,521220],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(186,217,78,1)","line":{"color":"rgba(186,217,78,1)"}},"textfont":{"color":"rgba(186,217,78,1)"},"error_y":{"color":"rgba(186,217,78,1)"},"error_x":{"color":"rgba(186,217,78,1)"},"line":{"color":"rgba(186,217,78,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1975,1980,1981,1982,1989,1990,1991,1992,1993,1996,1997,1998,1999,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[4131,200000,210000,220000,221450,210110,3645,7350,87314,37642,10600,1617,1179,301000,307020,313160,331000,281000,181000,184620,184620,184620,184620],"mode":"lines+markers","type":"scatter","name":"SQUID","marker":{"color":"rgba(227,217,62,1)","line":{"color":"rgba(227,217,62,1)"}},"textfont":{"color":"rgba(227,217,62,1)"},"error_y":{"color":"rgba(227,217,62,1)"},"error_x":{"color":"rgba(227,217,62,1)"},"line":{"color":"rgba(227,217,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1974,1978,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[3538,6710,600,416,1570,78046,78000,66000,171000,200000,195000,195000,195000,3404121,867381,2643410,973586,745197,1967240,2457807,2665956,2257438,2465034,2861419,2510403,2698692,2546532,2380764,2800706,1317383,759800,794100,796688,839931,355047,404296,306554,347861,322023,313946,320225,266793,481132,450967,271400,226830,243504,218991,218991],"mode":"lines+markers","type":"scatter","name":"SWORDFISH","marker":{"color":"rgba(252,214,66,1)","line":{"color":"rgba(252,214,66,1)"}},"textfont":{"color":"rgba(252,214,66,1)"},"error_y":{"color":"rgba(252,214,66,1)"},"error_x":{"color":"rgba(252,214,66,1)"},"line":{"color":"rgba(252,214,66,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1992,1993,1994,1995,1996,1997,1998,2000,2001,2002,2003,2004,2005,2006,2007,2008],"y":[1365000,3740948,6513920,4431170,1988132,375000,375000,1425,25365,30104,1246455,1714221,1597257,1914989,1953289,1992355],"mode":"lines+markers","type":"scatter","name":"TILAPIA","marker":{"color":"rgba(241,204,114,1)","line":{"color":"rgba(241,204,114,1)"}},"textfont":{"color":"rgba(241,204,114,1)"},"error_y":{"color":"rgba(241,204,114,1)"},"error_x":{"color":"rgba(241,204,114,1)"},"line":{"color":"rgba(241,204,114,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1977,1981,1987,1991,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008],"y":[13,109,120,1560000,5220,5220,59756,83820,126109,39895,15947,23907,46038,190055,429503,230739,255286,260392,265600],"mode":"lines+markers","type":"scatter","name":"TROUT","marker":{"color":"rgba(226,195,150,1)","line":{"color":"rgba(226,195,150,1)"}},"textfont":{"color":"rgba(226,195,150,1)"},"error_y":{"color":"rgba(226,195,150,1)"},"error_x":{"color":"rgba(226,195,150,1)"},"line":{"color":"rgba(226,195,150,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[27873609,34267856,34331993,40755703,53367728,55524754,32129458,75183397,153161611,238157090,216918910,187721122,182027224,93228960,100344451,52872660,508,1145,4131,180779,2250000,1222000,459545,731694,832463,1072006,1584003,2093055,2109469,2030990,2131807,2269895,2268219,2712680,1619597,1188557,1032275,992016,1297899,472327,518533,175646,1380078,1513496,1455584,1484696,1463932,1754476,1923110,1376000,1310032,1408739,1349292,1349292],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(204,187,165,1)","line":{"color":"rgba(204,187,165,1)"}},"textfont":{"color":"rgba(204,187,165,1)"},"error_y":{"color":"rgba(204,187,165,1)"},"error_x":{"color":"rgba(204,187,165,1)"},"line":{"color":"rgba(204,187,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1975,1976,1977,1978,1979,1980,1982,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[645,883,624,95,54,560484,769164,835112,60,10600,71,100,305,27500,3026014,1495721,2972821,3081037,1383297,2955344,2065035,1461468,4327468,2870642,2455013,1817614,1690525,1123474,1122759,1293091,743026,925003,931503,938133,600000,600000,600000,709000,620000,608311,608477,603121,685000,663000,679000,692580,380580,380580,1320580],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="other" class="level2">
<h2 class="anchored" data-anchor-id="other">Other</h2>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>other_products <span class="ot">&lt;-</span> product_ports <span class="sc">%&gt;%</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(io_pac_port_group <span class="sc">==</span> <span class="st">"other"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wholesale =</span> <span class="fu">sum</span>(dollars, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(product_general, year) <span class="sc">%&gt;%</span> </span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>other_top_90 <span class="ot">&lt;-</span> other_products <span class="sc">%&gt;%</span> </span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span> </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, <span class="fu">desc</span>(wholesale)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year_total =</span> <span class="fu">sum</span>(wholesale, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">share =</span> wholesale <span class="sc">/</span> year_total,</span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">cumshare =</span> <span class="fu">cumsum</span>(share)) <span class="sc">%&gt;%</span> </span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(cumshare <span class="sc">&lt;=</span> <span class="fl">0.9</span> <span class="sc">|</span> <span class="fu">row_number</span>() <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unique</span>()</span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" aria-hidden="true" tabindex="-1"></a>other_top_products <span class="ot">&lt;-</span> other_products <span class="sc">%&gt;%</span> </span>
<span id="cb26-19"><a href="#cb26-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(product_general <span class="sc">%in%</span> other_top_90)</span>
<span id="cb26-20"><a href="#cb26-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-21"><a href="#cb26-21" aria-hidden="true" tabindex="-1"></a><span class="fu">plot_ly</span>(other_top_products, <span class="at">x =</span> <span class="sc">~</span>year, <span class="at">y =</span> <span class="sc">~</span>wholesale, </span>
<span id="cb26-22"><a href="#cb26-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">color =</span> <span class="sc">~</span>product_general, </span>
<span id="cb26-23"><a href="#cb26-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">type =</span> <span class="st">'scatter'</span>, </span>
<span id="cb26-24"><a href="#cb26-24" aria-hidden="true" tabindex="-1"></a>        <span class="at">mode =</span> <span class="st">'lines+markers'</span>, </span>
<span id="cb26-25"><a href="#cb26-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">group =</span> <span class="sc">~</span>product_general) <span class="sc">%&gt;%</span> </span>
<span id="cb26-26"><a href="#cb26-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">layout</span>(<span class="at">title =</span> <span class="st">"Others Locations Products in top 90% of Revenue"</span>,</span>
<span id="cb26-27"><a href="#cb26-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">xaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Year"</span>),</span>
<span id="cb26-28"><a href="#cb26-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">yaxis =</span> <span class="fu">list</span>(<span class="at">title =</span> <span class="st">"Wholesale Price"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-782c6602262f7553d5af" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-782c6602262f7553d5af">{"x":{"visdat":{"4bb05ee21226":["function () ","plotlyVisDat"]},"cur_data":"4bb05ee21226","attrs":{"4bb05ee21226":{"x":{},"y":{},"mode":"lines+markers","color":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"scatter"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Others Locations Products in top 90% of Revenue","xaxis":{"domain":[0,1],"automargin":true,"title":"Year"},"yaxis":{"domain":[0,1],"automargin":true,"title":"Wholesale Price"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[11904,6160,88991,160000,172752,160000,43000,62288,38837,96,4066,42033,31836,38673,14125,135600,356853,5369717,2257941,2252278,142267,2575643,520940,354535,2529774,3341929,3686162,123887,891650,890450,1024153,326000,214350,1674136,4934517,5116101,143464,92063,103469,91293,68732,68732,52710,2403120],"mode":"lines+markers","type":"scatter","name":"COD","marker":{"color":"rgba(102,194,165,1)","line":{"color":"rgba(102,194,165,1)"}},"textfont":{"color":"rgba(102,194,165,1)"},"error_y":{"color":"rgba(102,194,165,1)"},"error_x":{"color":"rgba(102,194,165,1)"},"line":{"color":"rgba(102,194,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[200016,235056,75000,1216142,1213649,3124421,911867,916729,1104294,850000,2024963,12787354,9762045,2482240,2250000,22201790,7653802,9313811,12966165,13016461,10521786,11144745,7696119,2095282,1377028,1458144,2468340,349675,309295,168990,188538,264000,254031,467000,474700,1157464,13714354,11769060,28701147,11719106,13798767,33376842,61374759,148602621,27226374,41314689,22369372,22674638,22490465,6830275,5366309],"mode":"lines+markers","type":"scatter","name":"CRAB","marker":{"color":"rgba(189,173,133,1)","line":{"color":"rgba(189,173,133,1)"}},"textfont":{"color":"rgba(189,173,133,1)"},"error_y":{"color":"rgba(189,173,133,1)"},"error_x":{"color":"rgba(189,173,133,1)"},"line":{"color":"rgba(189,173,133,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1976,1977,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[261073,120900,21380,22800,29000,29000,114152,107946,748,3260220,2506596,6800649,8366790,5838720,3425000,7375000,10789000,8243033,18812528,10457080,3347936,1027411,3424920,5733839,168865,5718803,6350384,3564197,610806,559500,664631,125436,21804,11611,13298,13298,13564,18278,18644,71893,1142918,681647,3736901,2966847,19821,20321,27369,27917,28475,28475,9748,8797],"mode":"lines+markers","type":"scatter","name":"FLOUNDER","marker":{"color":"rgba(245,146,102,1)","line":{"color":"rgba(245,146,102,1)"}},"textfont":{"color":"rgba(245,146,102,1)"},"error_y":{"color":"rgba(245,146,102,1)"},"error_x":{"color":"rgba(245,146,102,1)"},"line":{"color":"rgba(245,146,102,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[20134693,19104102,9281286,31706688,27196936,26450716,35304034,41017901,35254586,24390776,14345050,10056161,9158438,15084016,14518943,33376337,43338390,85826975,53420459,64073360,82372586,83432777,92553100,122622084,70247301,100007533,122917017,119319732,100490650,91730665,170334348,157633392,120023392],"mode":"lines+markers","type":"scatter","name":"HAKE","marker":{"color":"rgba(217,150,141,1)","line":{"color":"rgba(217,150,141,1)"}},"textfont":{"color":"rgba(217,150,141,1)"},"error_y":{"color":"rgba(217,150,141,1)"},"error_x":{"color":"rgba(217,150,141,1)"},"line":{"color":"rgba(217,150,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[6900,9750,780005,15840,23210,7816,3520,81396,4500,1051,2147566,1829305,5767968,3448117,1607317,3936505,3626029,988081,723737,1847931,2074143,1628054,1524549,1555945,6897957,5396400,5445111,6010393,457065,725340,705239,559440,2245725,1094686,4895965,6601914,8179414,10659416,12111483,7452748,5803462,6568361,5997383,5798315,5914281,5914281,9182845,7602254],"mode":"lines+markers","type":"scatter","name":"HALIBUT","marker":{"color":"rgba(162,158,189,1)","line":{"color":"rgba(162,158,189,1)"}},"textfont":{"color":"rgba(162,158,189,1)"},"error_y":{"color":"rgba(162,158,189,1)"},"error_x":{"color":"rgba(162,158,189,1)"},"line":{"color":"rgba(162,158,189,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[8433,33140,21285,11840,7056,8610,3750,32062,32681,231402,583059,646296,13477,32984,28004,9200,10515,4675,3463,1001048,3001244,14598959,9156351,4789447,7655047,7684252,9818917,9019537,4624835,3648571,3539165,3927451,3654812,1625869,1698944,1681656,1714433,1754522,1786811,1814108,4481,13570,4097,6199,971405,6503766,11265903,5316568,6932,7072,1085038,1108735,1099765,9,15659],"mode":"lines+markers","type":"scatter","name":"OTHER","marker":{"color":"rgba(175,154,200,1)","line":{"color":"rgba(175,154,200,1)"}},"textfont":{"color":"rgba(175,154,200,1)"},"error_y":{"color":"rgba(175,154,200,1)"},"error_x":{"color":"rgba(175,154,200,1)"},"line":{"color":"rgba(175,154,200,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[420628,607442,829962,689211,634577,969502,783355,976113,1019415,582660,1046874,595132,1053710,882997,1765676,1158033,628760,1088760,793681,811444,438564,526381,168630,148828,89560,187144,815681,303681,17424,5035,28871,25407,29064,33582,40793,40830,26240,65240,66545,4700000,3754630,4785000,5270000,6447528,6378235,6151879,6338492,6142000,10055016,10374249,17581734,11718773,11718773,11718773,11718773],"mode":"lines+markers","type":"scatter","name":"OYSTERS","marker":{"color":"rgba(215,144,197,1)","line":{"color":"rgba(215,144,197,1)"}},"textfont":{"color":"rgba(215,144,197,1)"},"error_y":{"color":"rgba(215,144,197,1)"},"error_x":{"color":"rgba(215,144,197,1)"},"line":{"color":"rgba(215,144,197,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1971,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[650,1447134,5705282,5794176,10924954,10969968,16530433,27702898,27183594,25788279,14505477,16001821,21756377,36588564,45972077,70350060,54857900,37084930,40883745,36390379,33977565,42649193,41867912,42803155,14280000,8465952,25909202,16122733,44694248,49532396,46830224,117269390,109611417,104492321,106053275,117047394,110908372,152904227,110402466,108839495],"mode":"lines+markers","type":"scatter","name":"POLLOCK","marker":{"color":"rgba(219,162,168,1)","line":{"color":"rgba(219,162,168,1)"}},"textfont":{"color":"rgba(219,162,168,1)"},"error_y":{"color":"rgba(219,162,168,1)"},"error_x":{"color":"rgba(219,162,168,1)"},"line":{"color":"rgba(219,162,168,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1974,1976,1977,1978,1979,1980,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[6376,300217,267412,49,27949,873,60,1611427,3603000,1424600,875000,875000,3450000,4523124,17517088,3154165,3140278,209598,1011564,12165751,686219,5017395,4277227,2454818,1302228,1480450,1491191,1661056,19080,7150,6660,6660,6793,8400,8568,8739,8739,249927,758595,771727,16102,16369,45935,46854,47791,47791,46256,65520],"mode":"lines+markers","type":"scatter","name":"ROCKFISH","marker":{"color":"rgba(189,198,118,1)","line":{"color":"rgba(189,198,118,1)"}},"textfont":{"color":"rgba(189,198,118,1)"},"error_y":{"color":"rgba(189,198,118,1)"},"error_x":{"color":"rgba(189,198,118,1)"},"line":{"color":"rgba(189,198,118,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1970,1971,1972,1973,1974,1975,1979,1980,1982,1983,1984,1985,1986,1989,1991,1992,1993,1994,1995,1996,1997,1998,1999,2013,2014,2015,2016,2023],"y":[7215,15000,154485,231300,227000,227000,149,351,1300,400,805056,1865276,1825944,330699,1259451,1244558,2823,7315,570,78744,777561,617363,43000,4300,384866,398601,1328,78495],"mode":"lines+markers","type":"scatter","name":"SABLEFISH","marker":{"color":"rgba(186,217,78,1)","line":{"color":"rgba(186,217,78,1)"}},"textfont":{"color":"rgba(186,217,78,1)"},"error_y":{"color":"rgba(186,217,78,1)"},"error_x":{"color":"rgba(186,217,78,1)"},"line":{"color":"rgba(186,217,78,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[1058867,2452245,1385014,1056040,2189304,2524455,2831466,2672977,4865258,4306087,4225812,3303913,5869240,4611436,4587297,6560102,7377256,5151821,7899460,11259981,13645381,6743947,18738163,18892381,22196316,24459072,19564890,23506022,23116626,12544103,15500979,19913449,20051454,10964757,11661748,11249591,4235307,5137337,4702478,2336858,1341630,4818532,15735045,37607572,45172264,65909826,73832978,82160218,86568816,38444627,101043079,148343921,147482702,123133969,140334434],"mode":"lines+markers","type":"scatter","name":"SALMON","marker":{"color":"rgba(227,217,62,1)","line":{"color":"rgba(227,217,62,1)"}},"textfont":{"color":"rgba(227,217,62,1)"},"error_y":{"color":"rgba(227,217,62,1)"},"error_x":{"color":"rgba(227,217,62,1)"},"line":{"color":"rgba(227,217,62,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[2403,319061,229442,565243,715354,780788,1500257,466698,471706,3465803,796872,782057,6888847,5873771,5518000,3490756,1709886,480965,7021080,3715000,3406280,3069900,2982769,3300386,118722,13207652,5674172,914387,14345750,12233572,10181808,287144,134225,1631321,1429870,1304052,1413602,1449091,118155,1930691,445348,921251,3249562,2805266,9387373,14516902,63376367,62825831,58221753,15641126,12995352,15870374,14754460,16614337,15190996],"mode":"lines+markers","type":"scatter","name":"SHRIMP","marker":{"color":"rgba(252,214,66,1)","line":{"color":"rgba(252,214,66,1)"}},"textfont":{"color":"rgba(252,214,66,1)"},"error_y":{"color":"rgba(252,214,66,1)"},"error_x":{"color":"rgba(252,214,66,1)"},"line":{"color":"rgba(252,214,66,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[252,21700,36500,78060,6261,26197,43427,25181,150450,65920,135833,39193,116065,71366,48220,193100,85014,278087,149853,146099,849381,1106875,2071052,1682824,415747,2651138,2971500,2731320,2693560,792840,2331840,4195000,5160120,6121120,6708838,6842965,6979774,7119319,7493913,7768059,8046580,8264593,7169356,7316054,4546342,8118792,8005939,6663321,6663321,6663321,6606385],"mode":"lines+markers","type":"scatter","name":"STURGEON","marker":{"color":"rgba(241,204,114,1)","line":{"color":"rgba(241,204,114,1)"}},"textfont":{"color":"rgba(241,204,114,1)"},"error_y":{"color":"rgba(241,204,114,1)"},"error_x":{"color":"rgba(241,204,114,1)"},"line":{"color":"rgba(241,204,114,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1974,1975,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[125000,7212,114206,95314,699681,783215,281250,127494,117818,59000,123140,148586,5313,334750,61117,114621,323361,136961,223054,86198,170015,41996,47466,32239,16013,57645,55250,55250,60775,1931311,51834000,53238278,49023843,4568974,13170000,13433400,13702068,13976109,14255631,14255631,34717277,32089272],"mode":"lines+markers","type":"scatter","name":"TROUT","marker":{"color":"rgba(226,195,150,1)","line":{"color":"rgba(226,195,150,1)"}},"textfont":{"color":"rgba(226,195,150,1)"},"error_y":{"color":"rgba(226,195,150,1)"},"error_x":{"color":"rgba(226,195,150,1)"},"line":{"color":"rgba(226,195,150,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[671830,3970250,3315539,5385075,5901897,4470769,2446370,1260,178,349,1155,170,1260,9240,4282,135336,800575,2358560,1184958,154125,144738,252476,131822,351647,627792,312052,821057,461174,684448,493160,148726,81025,70304,122642,108007,62120,63202,23100,97132,965835,1089700,5148048,12602948,13285548,712878,1160737,814000,1527807,1558363,1504158,709785,181497],"mode":"lines+markers","type":"scatter","name":"TUNA","marker":{"color":"rgba(204,187,165,1)","line":{"color":"rgba(204,187,165,1)"}},"textfont":{"color":"rgba(204,187,165,1)"},"error_y":{"color":"rgba(204,187,165,1)"},"error_x":{"color":"rgba(204,187,165,1)"},"line":{"color":"rgba(204,187,165,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":[1969,1970,1971,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2000,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023],"y":[160,331340,368608,495236,742000,787570,787587,4308505,1620585,1619100,3465608,2935000,1406029,8175650,6701843,36253455,24984972,527760,2106222,325042,1213765,2698014,2396578,2082108,2163699,3031272,7109682,5790711,3849514,860000,758868,1079875,1358298,1866888,21027270,28181457,19827442,27439182,28713538,33859788,36607095,44803928,32944063,33204389,34689715,30469638,39343282,30770422,31897176,29199462,31420251],"mode":"lines+markers","type":"scatter","name":"UNCLASSIFIED","marker":{"color":"rgba(179,179,179,1)","line":{"color":"rgba(179,179,179,1)"}},"textfont":{"color":"rgba(179,179,179,1)"},"error_y":{"color":"rgba(179,179,179,1)"},"error_x":{"color":"rgba(179,179,179,1)"},"line":{"color":"rgba(179,179,179,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>